"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[621],{85621:function(e,t,a){a.d(t,{Z:function(){return Z}});var n=a(73396),r=a(49242),o={key:0,class:"h4 mb-4"},i={key:1,class:"h4 mb-4"},s=(0,n.Uk)("ID "),u={class:"col-sm-2"},l=(0,n.Uk)("Tahun "),d=(0,n._)("span",{class:"text-red-500"},"*",-1),c={class:"col-sm-2"},m=(0,n.Uk)("Nama Sektor "),p=(0,n._)("span",{class:"text-red-500"},"*",-1),f={class:"col-sm-9"},k=(0,n.Uk)("Informasi Sektor Yang Diharapkan"),h=(0,n._)("span",{class:"text-red-500"},"*",-1),w={class:"col-sm-9"},g=(0,n._)("p",{class:"text-sm mt-2 text-red-500"}," note : pisahkan informasi sektor dengan titik koma ';' ",-1),b=(0,n.Uk)("Kedeputian Koord Sektor "),_=(0,n._)("span",{class:"text-red-500"},"*",-1),v={class:"col-sm-9"},S=(0,n.Uk)("Unit Kerja PJ Sektor "),x=(0,n._)("span",{class:"text-red-500"},"*",-1),W={class:"col-sm-9"},U=(0,n.Uk)("Triwulan Pelaporan Sektor "),y=(0,n._)("span",{class:"text-red-500"},"*",-1),D={class:"col-sm-4"},R=(0,n.Uk)(" Batal "),C=(0,n.Uk)(" Reset "),V={key:0},j=(0,n.Uk)(" Simpan "),K={key:1};function T(e,t,a,T,I,$){var F=(0,n.up)("Loading"),E=(0,n.up)("CFormLabel"),P=(0,n.up)("CFormInput"),B=(0,n.up)("CRow"),L=(0,n.up)("CFormTextarea"),q=(0,n.up)("VueMultiselect"),Z=(0,n.up)("CButton"),A=(0,n.up)("CCol"),O=(0,n.up)("CSpinner"),G=(0,n.up)("CForm"),M=(0,n.up)("CCardBody"),H=(0,n.up)("CCard");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(F,{active:I.loading,"onUpdate:active":t[0]||(t[0]=function(e){return I.loading=e}),"is-full-page":!0},null,8,["active"]),(0,n.Wm)(H,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(M,{class:"p-4"},{default:(0,n.w5)((function(){return["create"==a.mode?((0,n.wg)(),(0,n.iD)("h4",o,"Tambah Sektor")):"update"==a.mode?((0,n.wg)(),(0,n.iD)("h4",i,"Edit Sektor")):(0,n.kq)("",!0),"update"==a.mode?((0,n.wg)(),(0,n.j4)(B,{key:2,class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[s]})),_:1}),(0,n._)("div",u,[(0,n.Wm)(P,{modelValue:I.editData.idSektor,"onUpdate:modelValue":t[1]||(t[1]=function(e){return I.editData.idSektor=e}),readonly:""},null,8,["modelValue"])])]})),_:1})):(0,n.kq)("",!0),(0,n.Wm)(G,{onSubmit:(0,r.iM)($.submit,["prevent"])},{default:(0,n.w5)((function(){return[(0,n.Wm)(B,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[l,d]})),_:1}),(0,n._)("div",c,[(0,n.Wm)(P,{type:"number",id:"tahun",modelValue:I.form.tahun,"onUpdate:modelValue":t[2]||(t[2]=function(e){return I.form.tahun=e}),readonly:"",required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(B,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{for:"nama-sektor",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[m,p]})),_:1}),(0,n._)("div",f,[(0,n.Wm)(P,{type:"text",id:"nama-sektor",modelValue:I.form.namaSektor,"onUpdate:modelValue":t[3]||(t[3]=function(e){return I.form.namaSektor=e}),required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(B,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{for:"info-sektor",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[k,h]})),_:1}),(0,n._)("div",w,[(0,n.Wm)(L,{id:"info-sektor",rows:"3",modelValue:I.form.deskripsi,"onUpdate:modelValue":t[4]||(t[4]=function(e){return I.form.deskripsi=e}),required:"",placeholder:"Info A; Info B; Info C;"},null,8,["modelValue"]),g])]})),_:1}),(0,n.Wm)(B,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{for:"deputi-sektor",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[b,_]})),_:1}),(0,n._)("div",v,[(0,n.Wm)(P,{type:"text",id:"dep-sektor",value:I.viewDeputi,readonly:""},null,8,["value"])])]})),_:1}),(0,n.Wm)(B,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{for:"pj-sektor",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[S,x]})),_:1}),(0,n._)("div",W,[(0,n.Wm)(q,{id:"pj-sektor",modelValue:I.selectedRendal,"onUpdate:modelValue":t[5]||(t[5]=function(e){return I.selectedRendal=e}),options:I.optionsRendal,placeholder:"Pilih Unit Kerja Penanggungjawab",label:"deskripsi","track-by":"deskripsi","custom-label":$.viewSelectSearch},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,n.Wm)(B,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{for:"tw-sektor",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[U,y]})),_:1}),(0,n._)("div",D,[(0,n.Wm)(q,{id:"tw-sektor",modelValue:I.form.triwulan,"onUpdate:modelValue":t[6]||(t[6]=function(e){return I.form.triwulan=e}),options:I.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])]})),_:1}),(0,n.Wm)(B,{class:"mt-8 view-form"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{sm:"12",lg:"6",class:"mb-3"},{default:(0,n.w5)((function(){return["view"!=a.mode?((0,n.wg)(),(0,n.j4)(Z,{key:0,variant:"outline",color:"dark",onClick:t[7]||(t[7]=function(t){return e.$router.push({name:"Index Sektor"})}),class:"px-5"},{default:(0,n.w5)((function(){return[R]})),_:1})):(0,n.kq)("",!0)]})),_:1}),"create"==a.mode||"update"==a.mode?((0,n.wg)(),(0,n.j4)(A,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:$.reset},{default:(0,n.w5)((function(){return[C]})),_:1},8,["onClick"]),(0,n.Wm)(Z,{type:"submit",color:"info",class:"px-5 ml-2 text-white"},{default:(0,n.w5)((function(){return[I.loading?((0,n.wg)(),(0,n.iD)("div",V,[(0,n.Wm)(O,{color:"white",size:"sm",class:"mr-2"}),j])):((0,n.wg)(),(0,n.iD)("p",K,"Simpan"))]})),_:1})]})),_:1})):(0,n.kq)("",!0)]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1})],64)}var I=a(48534),$=(a(36133),a(92222),a(57327),a(41539),a(56265)),F=a.n($),E=a(16368),P=a(6216),B={components:{VueMultiselect:E.ZP,Loading:P.Z},props:["mode","idSektor"],data:function(){return{form:this.getEmptyForm(),submitted:!1,loading:!1,viewDeputi:null,selectedRendal:null,optionsRendal:[],optionsTriwulan:[1,2,3,4],editData:{}}},watch:{selectedRendal:function(e){e&&(this.form.idUnitKerja=e.id,this.form.idKedeputian=e.parentId,this.viewDeputi="".concat(e.deputi," - ").concat(e.namaDeputi))}},mounted:function(){var e=this;return(0,I.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.tahun=localStorage.tahun,t.next=3,e.$store.dispatch("loadListRendal");case 3:if(e.optionsRendal=t.sent,"update"!=e.mode){t.next=10;break}return e.loading=!0,t.next=8,e.loadSektorById();case 8:a=e.optionsRendal.filter((function(t){return t.id==e.form.idUnitKerja})),e.selectedRendal=a[0];case 10:case"end":return t.stop()}}),t)})))()},methods:{viewSelectSearch:function(e){var t=e.alias,a=e.deskripsi;return"".concat(t," - ").concat(a)},submit:function(){var e=this;return(0,I.Z)(regeneratorRuntime.mark((function t(){var a,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$func.isNullOfObjElement(e.form),!a){t.next=26;break}if(e.submitted=!0,n=e.appendToFormData(),t.prev=4,"create"!=e.mode){t.next=13;break}return e.loading=!0,t.next=9,F()({method:"POST",baseURL:e.$apiAddress,url:"/api/sektor",data:n,params:{token:localStorage.getItem("token")}});case 9:r=t.sent,200!=r.status?e.error="Gagal menyimpan data":(e.loading=!1,e.$router.push("/sektor"),e.toastSuccess("Berhasil menyimpan data")),t.next=19;break;case 13:if("update"!=e.mode){t.next=19;break}return e.loading=!0,t.next=17,F()({method:"POST",baseURL:e.$apiAddress,url:"/api/sektor/".concat(e.idSektor),data:n,params:{token:localStorage.getItem("token")}});case 17:o=t.sent,200!=o.status?e.error="Gagal merubah data":(e.loading=!1,e.$router.push("/sektor"),e.toastSuccess("Berhasil merubah data"));case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](4),setTimeout((function(){e.loading=!1,e.toastError("Terjadi kesalahan saat submit data")}),500);case 24:t.next=27;break;case 26:e.toastWarning("Lengkapi data sebelum submit!");case 27:case"end":return t.stop()}}),t,null,[[4,21]])})))()},reset:function(){this.form=this.getEmptyForm(),this.submitted=!1,this.viewDeputi=null,this.selectedRendal=null},getEmptyForm:function(){return{tahun:null,namaSektor:null,deskripsi:null,idKedeputian:null,idUnitKerja:null,triwulan:null}},appendToFormData:function(){var e=new FormData;return"update"==this.mode&&e.append("_method","PATCH"),e.append("tahun",this.form.tahun),e.append("namaSektor",this.form.namaSektor),e.append("deskripsi",this.form.deskripsi),e.append("idKedeputian",this.form.idKedeputian),e.append("idUnitKerja",this.form.idUnitKerja),e.append("triwulan",this.form.triwulan),e.append("nip",localStorage.getItem("nip")),e},loadSektorById:function(){var e=this;return(0,I.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F()({method:"GET",baseURL:e.$apiAddress,url:"/api/sektor/".concat(e.idSektor),params:{token:localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.data;case 6:e.editData=t.sent,200==a.status&&(e.form={tahun:e.editData.tahun,namaSektor:e.editData.namaSektor,deskripsi:e.editData.deskripsi,idKedeputian:e.editData.idKedeputian,idUnitKerja:e.editData.idUnitKerja,triwulan:e.editData.triwulan}),e.loading=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.toastError(t.t0.message),e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},toastSuccess:function(e){this.$toast.open({message:e,type:"success",position:"top-right",duration:3e3})},toastError:function(e){this.$toast.open({message:e,type:"error",position:"top-right",duration:3e3})},toastWarning:function(e){this.$toast.open({message:e,type:"warning",position:"top-right",duration:3e3})}}},L=a(40089);const q=(0,L.Z)(B,[["render",T]]);var Z=q}}]);
//# sourceMappingURL=621-legacy.70277e49.js.map