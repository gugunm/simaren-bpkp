"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[836],{4836:function(e,t,n){n.d(t,{Z:function(){return z}});var a=n(73396),o=n(49242),r={key:0,class:"h4 mb-4"},i={key:1,class:"h4 mb-4"},u=(0,a.Uk)("ID "),l={class:"col-sm-2"},s=(0,a.Uk)("Tahun "),d=(0,a._)("span",{class:"text-red-500"},"*",-1),m={class:"col-sm-2"},c=(0,a.Uk)("Nama Sektor "),p=(0,a._)("span",{class:"text-red-500"},"*",-1),f={class:"col-sm-9"},k=(0,a.Uk)("Nama Tema "),h=(0,a._)("span",{class:"text-red-500"},"*",-1),w={class:"col-sm-9"},T=(0,a.Uk)("Nama Topik "),g=(0,a._)("span",{class:"text-red-500"},"*",-1),b={class:"col-sm-9"},_=(0,a.Uk)("Informasi Topik Yang Diharapkan"),v=(0,a._)("span",{class:"text-red-500"},"*",-1),S=(0,a.Uk)(" Hapus "),U=(0,a.Uk)(" Simpan "),W=(0,a.Uk)("Kedeputian Koord Topik "),x=(0,a._)("span",{class:"text-red-500"},"*",-1),y={class:"col-sm-9"},V=(0,a.Uk)("Unit Kerja PJ Topik "),I=(0,a._)("span",{class:"text-red-500"},"*",-1),R={class:"col-sm-9"},D=(0,a.Uk)("Triwulan Pelaporan Topik "),C=(0,a._)("span",{class:"text-red-500"},"*",-1),L={class:"col-sm-4"},j=(0,a.Uk)(" Batal "),K=(0,a.Uk)(" Reset "),$={key:0},P=(0,a.Uk)(" Simpan "),E={key:1};function F(e,t,n,F,N,Z){var q=this,B=(0,a.up)("Loading"),O=(0,a.up)("CFormLabel"),A=(0,a.up)("CFormInput"),H=(0,a.up)("CRow"),M=(0,a.up)("VueMultiselect"),z=(0,a.up)("CCol"),G=(0,a.up)("CFormTextarea"),Y=(0,a.up)("CButton"),J=(0,a.up)("CForm"),Q=(0,a.up)("CSpinner"),X=(0,a.up)("CCardBody"),ee=(0,a.up)("CCard");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(B,{active:N.loading,"onUpdate:active":t[0]||(t[0]=function(e){return N.loading=e}),"is-full-page":!0},null,8,["active"]),(0,a.Wm)(ee,{class:"mb-4"},{default:(0,a.w5)((function(){return[(0,a.Wm)(X,{class:"p-4"},{default:(0,a.w5)((function(){return["create"==n.mode?((0,a.wg)(),(0,a.iD)("h4",r,"Tambah Topik")):"update"==n.mode?((0,a.wg)(),(0,a.iD)("h4",i,"Edit Topik")):(0,a.kq)("",!0),"update"==n.mode?((0,a.wg)(),(0,a.j4)(H,{key:2,class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[u]})),_:1}),(0,a._)("div",l,[(0,a.Wm)(A,{modelValue:N.editData.idTopik,"onUpdate:modelValue":t[1]||(t[1]=function(e){return N.editData.idTopik=e}),readonly:""},null,8,["modelValue"])])]})),_:1})):(0,a.kq)("",!0),(0,a.Wm)(J,{onSubmit:(0,o.iM)(Z.submit,["prevent"])},{default:(0,a.w5)((function(){return[(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[s,d]})),_:1}),(0,a._)("div",m,[(0,a.Wm)(A,{type:"number",id:"tahun",modelValue:N.form.tahun,"onUpdate:modelValue":t[2]||(t[2]=function(e){return N.form.tahun=e}),readonly:"",required:""},null,8,["modelValue"])])]})),_:1}),(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"nama-sektor",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[c,p]})),_:1}),(0,a._)("div",f,[(0,a.Wm)(M,{id:"nama-sektor",modelValue:N.selectedSektor,"onUpdate:modelValue":t[3]||(t[3]=function(e){return N.selectedSektor=e}),options:N.optionsSektor,placeholder:"Pilih Sektor",label:"deskripsi","track-by":"deskripsi","custom-label":Z.viewSelectSektor},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"nama-tema",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[k,h]})),_:1}),(0,a._)("div",w,[(0,a.Wm)(M,{id:"nama-tema",modelValue:N.selectedTema,"onUpdate:modelValue":t[4]||(t[4]=function(e){return N.selectedTema=e}),options:N.optionsTema,placeholder:"Pilih Tema",label:"deskripsi","track-by":"deskripsi","custom-label":Z.viewSelectTema},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"nama-topik",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[T,g]})),_:1}),(0,a._)("div",b,[(0,a.Wm)(A,{type:"text",id:"nama-topik",modelValue:N.form.namaTopik,"onUpdate:modelValue":t[5]||(t[5]=function(e){return N.form.namaTopik=e}),required:""},null,8,["modelValue"])])]})),_:1}),(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(z,{sm:"3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"sumber-dana",class:"col-form-label"},{default:(0,a.w5)((function(){return[_,v]})),_:1})]})),_:1}),(0,a.Wm)(z,{sm:"9"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.infoTopikList,(function(e){return(0,a.wg)(),(0,a.j4)(H,{key:e.info,class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(z,{sm:"8"},{default:(0,a.w5)((function(){return[(0,a.Wm)(G,{rows:"1",type:"text",readonly:"",value:e.info},null,8,["value"])]})),_:2},1024),(0,a.Wm)(z,{sm:"2"},{default:(0,a.w5)((function(){return[(0,a.Wm)(A,{type:"number",id:"info",placeholder:"No Urut",modelValue:e.nomorUrut,"onUpdate:modelValue":function(t){return e.nomorUrut=t},readonly:""},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024),(0,a.Wm)(z,{sm:"2"},{default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{type:"submit",color:"danger",size:"",shape:"rounded-0",class:"w-full text-white",onClick:function(t){return Z.deleteInfoTopik(e.nomorUrut)}},{default:(0,a.w5)((function(){return[S]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)})),128)),(0,a.Wm)(J,{onSubmit:(0,o.iM)(Z.addInfoTopik,["prevent"])},{default:(0,a.w5)((function(){return[(0,a.Wm)(H,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(z,{sm:"8"},{default:(0,a.w5)((function(){return[(0,a.Wm)(A,{type:"text",id:"info",placeholder:"Info",modelValue:N.infoCurrentTopik,"onUpdate:modelValue":t[6]||(t[6]=function(e){return N.infoCurrentTopik=e}),required:""},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(z,{sm:"2"},{default:(0,a.w5)((function(){return[(0,a.Wm)(A,{type:"number",id:"info",placeholder:"No Urut",modelValue:N.infoNomorUrut,"onUpdate:modelValue":t[7]||(t[7]=function(e){return N.infoNomorUrut=e}),required:""},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(z,{sm:"2"},{default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{type:"submit",color:"primary",size:"",shape:"rounded-0",class:"w-full"},{default:(0,a.w5)((function(){return[U]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1}),(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"deputi-topik",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[W,x]})),_:1}),(0,a._)("div",y,[(0,a.Wm)(A,{type:"text",id:"dep-topik",value:N.viewDeputi,readonly:""},null,8,["value"])])]})),_:1}),(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"pj-topik",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[V,I]})),_:1}),(0,a._)("div",R,[(0,a.Wm)(M,{id:"pj-topik",modelValue:N.selectedRendal,"onUpdate:modelValue":t[8]||(t[8]=function(e){return N.selectedRendal=e}),options:N.optionsRendal,placeholder:"Pilih Unit Kerja Penanggungjawab",label:"deskripsi","track-by":"deskripsi","custom-label":Z.viewSelectSearch},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,a.Wm)(H,{class:"mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{for:"tw-topik",class:"col-sm-3 col-form-label"},{default:(0,a.w5)((function(){return[D,C]})),_:1}),(0,a._)("div",L,[(0,a.Wm)(M,{id:"tw-topik",modelValue:N.form.triwulan,"onUpdate:modelValue":t[9]||(t[9]=function(e){return N.form.triwulan=e}),options:N.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])]})),_:1}),(0,a.Wm)(H,{class:"mt-8 view-form"},{default:(0,a.w5)((function(){return[(0,a.Wm)(z,{sm:"12",lg:"6",class:"mb-3"},{default:(0,a.w5)((function(){return["view"!=n.mode?((0,a.wg)(),(0,a.j4)(Y,{key:0,variant:"outline",color:"dark",onClick:t[10]||(t[10]=function(t){return e.$router.push("/topik")}),class:"px-5",shape:"rounded-0"},{default:(0,a.w5)((function(){return[j]})),_:1})):(0,a.kq)("",!0)]})),_:1}),"create"==n.mode||"update"==n.mode?((0,a.wg)(),(0,a.j4)(z,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:Z.reset,shape:"rounded-0"},{default:(0,a.w5)((function(){return[K]})),_:1},8,["onClick"]),(0,a.Wm)(Y,{type:"submit",shape:"rounded-0",color:"info",class:"px-5 ml-2 text-white"},{default:(0,a.w5)((function(){return[N.loading?((0,a.wg)(),(0,a.iD)("div",$,[(0,a.Wm)(Q,{color:"white",size:"sm",class:"mr-2"}),P])):((0,a.wg)(),(0,a.iD)("p",E,"Simpan"))]})),_:1})]})),_:1})):(0,a.kq)("",!0)]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1})],64)}var N=n(48534),Z=(n(36133),n(92222),n(57327),n(41539),n(21249),n(40561),n(54747),n(56265)),q=n.n(Z),B=n(16368),O=n(6216),A={components:{VueMultiselect:B.ZP,Loading:O.Z},props:["mode","idTopik"],data:function(){return{form:this.getEmptyForm(),submitted:!1,loading:!1,selectedSektor:null,optionsSektor:[],selectedTema:null,optionsTema:[],viewDeputi:null,selectedRendal:null,optionsRendal:[],optionsTriwulan:[1,2,3,4],editData:{},infoTopikList:[],infoCurrentTopik:"",infoNomorUrut:null}},watch:{selectedSektor:function(e){e&&(this.form.idSektor=e.idSektor,this.selectedTema="",this.getListTema())},selectedTema:function(e){e&&(this.form.idTema=e.idTema)},selectedRendal:function(e){e&&(this.form.idUnitKerja=e.id,this.form.idKedeputian=e.parentId,this.viewDeputi="".concat(e.deputi," - ").concat(e.namaDeputi))}},mounted:function(){var e=this;return(0,N.Z)(regeneratorRuntime.mark((function t(){var n,a,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.tahun=localStorage.tahun,t.next=3,e.$store.dispatch("loadListSektor");case 3:return e.optionsSektor=t.sent,t.next=6,e.$store.dispatch("loadListUnitKontributor");case 6:if(e.optionsRendal=t.sent,"update"!=e.mode){t.next=23;break}return e.loading=!0,t.next=11,e.loadTopikById();case 11:return n=e.optionsSektor.filter((function(t){return t.idSektor==e.form.idSektor})),e.selectedSektor=n[0],t.next=15,e.getListTema();case 15:return a=e.optionsTema.filter((function(t){return t.idTema==e.form.idTema})),e.selectedTema=a[0],o=e.optionsRendal.filter((function(t){return t.id==e.form.idUnitKerja})),e.selectedRendal=o[0],t.next=21,e.$store.dispatch("loadListInfoTopik",{idTopik:e.idTopik});case 21:r=t.sent,e.infoTopikList=r.map((function(e){return{info:e.detailInfoTopik,nomorUrut:e.noUrut}}));case 23:case"end":return t.stop()}}),t)})))()},methods:{addInfoTopik:function(){this.infoTopikList.push({nomorUrut:this.infoNomorUrut,info:this.infoCurrentTopik}),this.infoCurrentTopik=""},deleteInfoTopik:function(e){var t=this;this.infoTopikList.filter((function(n){n.nomorUrut==e&&t.infoTopikList.splice(t.infoTopikList.indexOf(n),1)}))},getListTema:function(){var e=this;return(0,N.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadListTema",{idSektor:e.form.idSektor});case 2:e.optionsTema=t.sent;case 3:case"end":return t.stop()}}),t)})))()},viewSelectSektor:function(e){var t=e.namaSektor;return"".concat(t)},viewSelectTema:function(e){var t=e.namaTema;return"".concat(t)},viewSelectSearch:function(e){var t=e.alias,n=e.deskripsi;return"".concat(t," - ").concat(n)},submit:function(){var e=this;return(0,N.Z)(regeneratorRuntime.mark((function t(){var n,a,o,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$func.isNullOfObjElement(e.form),!n){t.next=31;break}if(e.submitted=!0,a=e.appendToFormData(),t.prev=4,"create"!=e.mode){t.next=17;break}return e.loading=!0,t.next=9,q()({method:"POST",baseURL:e.$apiAddress,url:"/api/topik",data:a,params:{token:localStorage.getItem("token")}});case 9:return o=t.sent,t.next=12,o.data;case 12:r=t.sent,e.infoTopikList.forEach(function(){var t=(0,N.Z)(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={idTopik:r.id,idTema:parseInt(e.form.idTema),idSektor:parseInt(e.form.idSektor),detailInfoTopik:n.info,noUrut:parseInt(n.nomorUrut),nip:localStorage.getItem("nip")},t.next=3,q()({method:"POST",baseURL:e.$apiAddress,url:"/api/infotopik",data:a,params:{token:localStorage.getItem("token")}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),200!=o.status?e.error="Gagal menyimpan data":(e.loading=!1,e.$router.push("/topik"),e.toastSuccess("Berhasil menyimpan data")),t.next=24;break;case 17:if("update"!=e.mode){t.next=24;break}return e.loading=!0,t.next=21,q()({method:"POST",baseURL:e.$apiAddress,url:"/api/topik/".concat(e.idTopik),data:a,params:{token:localStorage.getItem("token")}});case 21:i=t.sent,e.infoTopikList.forEach(function(){var t=(0,N.Z)(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={idTopik:e.idTopik,idTema:parseInt(e.form.idTema),idSektor:parseInt(e.form.idSektor),detailInfoTopik:n.info,noUrut:parseInt(n.nomorUrut),nip:localStorage.getItem("nip")},t.next=3,q()({method:"POST",baseURL:e.$apiAddress,url:"/api/infotopik",data:a,params:{token:localStorage.getItem("token")}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),200!=i.status?e.error="Gagal merubah data":(e.loading=!1,e.$router.push("/topik"),e.toastSuccess("Berhasil merubah data"));case 24:t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](4),setTimeout((function(){e.loading=!1,e.toastError("Terjadi kesalahan saat submit data")}),500);case 29:t.next=32;break;case 31:e.toastWarning("Lengkapi data sebelum submit!");case 32:case"end":return t.stop()}}),t,null,[[4,26]])})))()},reset:function(){this.form=this.getEmptyForm(),this.submitted=!1,this.selectedSektor=null,this.selectedTema=null,this.viewDeputi=null,this.selectedRendal=null},getEmptyForm:function(){return{tahun:null,idSektor:null,idTema:null,namaTopik:null,idKedeputian:null,idUnitKerja:null,triwulan:null}},appendToFormData:function(){var e=new FormData;return"update"==this.mode&&e.append("_method","PATCH"),e.append("idSektor",this.form.idSektor),e.append("idTema",this.form.idTema),e.append("namaTopik",this.form.namaTopik),e.append("idKedeputian",this.form.idKedeputian),e.append("idUnitKerja",this.form.idUnitKerja),e.append("tahun",this.form.tahun),e.append("triwulan",this.form.triwulan),e.append("nip",localStorage.getItem("nip")),e},loadTopikById:function(){var e=this;return(0,N.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q()({method:"GET",baseURL:e.$apiAddress,url:"/api/topik/".concat(e.idTopik),params:{token:localStorage.getItem("token")}});case 3:return n=t.sent,t.next=6,n.data;case 6:e.editData=t.sent,200==n.status&&(e.form={tahun:e.editData.tahun,idSektor:e.editData.idSektor,idTema:e.editData.idTema,namaTopik:e.editData.namaTopik,idKedeputian:e.editData.idKedeputian,idUnitKerja:e.editData.idUnitKerja,triwulan:e.editData.triwulan}),e.loading=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.toastError(t.t0.message),e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},toastSuccess:function(e){this.$toast.open({message:e,type:"success",position:"top-right",duration:3e3})},toastError:function(e){this.$toast.open({message:e,type:"error",position:"top-right",duration:3e3})},toastWarning:function(e){this.$toast.open({message:e,type:"warning",position:"top-right",duration:3e3})}}},H=n(40089);const M=(0,H.Z)(A,[["render",F]]);var z=M}}]);
//# sourceMappingURL=836-legacy.00b6823c.js.map