"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[218],{5044:function(e,t,n){n.d(t,{Z:function(){return h}});var a=n(73396),r=n(87139),s={class:"flex flex-col"},o={class:"flex flex-row p-4"},i=(0,a._)("div",{class:"mr-4 flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mr-4 sm:h-10 sm:w-10"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"rgba(220, 38, 38)"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),l={class:"text-lg font-semibold mb-2"},c={class:"bg-gray-50 rounded-b-md px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},u={key:0},d=(0,a.Uk)(" Hapus ");function p(e,t,n,p,m,f){var g=(0,a.up)("CSpinner"),h=(0,a.up)("CModalBody"),k=(0,a.up)("CModal");return(0,a.wg)(),(0,a.j4)(k,{visible:n.statVisible,onClose:t[2]||(t[2]=function(){f.confirmCancel()})},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{class:"p-0"},{default:(0,a.w5)((function(){return[(0,a._)("div",s,[(0,a._)("div",o,[i,(0,a._)("div",null,[(0,a._)("p",l,(0,r.zw)(n.title||"Meninggalkan halaman"),1),(0,a._)("p",null,(0,r.zw)(n.msg||"Meniggalkan halaman tanpa melakukan submit data akan menghilangkan data yang telah diinput."),1)])]),(0,a._)("div",c,[(0,a._)("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:t[0]||(t[0]=function(){return f.confirmOk&&f.confirmOk.apply(f,arguments)})},[m.loading?((0,a.wg)(),(0,a.iD)("div",u,[(0,a.Wm)(g,{color:"white",size:"sm",class:"mr-2"})])):(0,a.kq)("",!0),d]),(0,a._)("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border-gray-300 shadow-sm px-4 py-2 bg-gray-100 text-base font-medium text-gray-700 hover:bg-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:t[1]||(t[1]=function(e){return f.confirmCancel()})}," Cancel ")])])]})),_:1})]})),_:1},8,["visible"])}var m={props:["statVisible","title","msg"],emits:["close-modal","confirm-ok"],computed:{},watch:{value:function(e){0==e&&this.confirmCancel()}},data:function(){return{loading:!1}},methods:{confirmCancel:function(){this.$emit("close-modal",!1)},confirmOk:function(){var e=this;this.loading=!0,setTimeout((function(){e.$emit("confirm-ok")}),500),this.loading=!1}}},f=n(40089);const g=(0,f.Z)(m,[["render",p]]);var h=g},19218:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var a=n(73396),r=n(49242),s=n(87139),o=(0,a._)("div",{class:"mb-4"},[(0,a._)("h4",{class:"h4"},"PKPT")],-1),i={class:"flex flex-wrap lg:flex-row-reverse"},l=(0,a._)("div",{class:"flex mb-3 w-full lg:w-1/2 align-middle justify-start lg:justify-end"},null,-1),c={class:"mb-3 w-full lg:w-1/2 flex justify-center lg:justify-start"},u=(0,a._)("span",{class:"inline-block w-2/12 lg:w-1/12 pt-2"},"Search",-1),d={key:0,class:"flex justify-center"},p=(0,a._)("p",{class:"italic text-yellow-500 mb-2 text-sm blink-animation"},[(0,a._)("span",null,"::: press enter untuk mencari")],-1),m=(0,a.Uk)("Setuju"),f=(0,a.Uk)("Tolak"),g={key:2};function h(e,t,n,h,k,w){var b=(0,a.up)("Loading"),x=(0,a.up)("CButton"),v=(0,a.up)("vue-good-table"),C=(0,a.up)("ConfirmDelete");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(b,{active:k.loading,"onUpdate:active":t[0]||(t[0]=function(e){return k.loading=e}),"is-full-page":!0},null,8,["active"]),o,(0,a._)("div",null,[(0,a._)("div",i,[l,(0,a._)("div",c,[u,(0,a.wy)((0,a._)("input",{class:"border-2 w-10/12 lg:w-6/12 transition ml-3 px-3 py-2 rounded-md focus:border-2 text-black text-sm",type:"text",name:"search",placeholder:"teks yang dicari","onUpdate:modelValue":t[1]||(t[1]=function(e){return k.searchTerm=e})},null,512),[[r.nr,k.searchTerm,void 0,{lazy:!0}]])])]),k.isSelectedRow?((0,a.wg)(),(0,a.iD)("div",d,[k.isShowForNipKhusus?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"text-xs mb-2 mr-2 rounded-md tracking-wide bg-green-600 text-white h-8 px-3 hover:bg-green-700 focus:bg-green-700 focus:outline-none",onClick:t[2]||(t[2]=function(){return w.approveAllPkpt&&w.approveAllPkpt.apply(w,arguments)})}," Setujui PKPT Terpilih ")):(0,a.kq)("",!0),k.isShowForNipKhusus?((0,a.wg)(),(0,a.iD)("button",{key:1,class:"text-xs mb-2 rounded-md tracking-wide bg-red-600 text-white h-8 px-3 hover:bg-red-700 focus:bg-red-700 focus:outline-none",onClick:t[3]||(t[3]=function(){return w.rejectAllPkpt&&w.rejectAllPkpt.apply(w,arguments)})}," Tolak PKPT Terpilih ")):(0,a.kq)("",!0)])):(0,a.kq)("",!0),p,k.rows?((0,a.wg)(),(0,a.j4)(v,{key:1,class:"mb-4",theme:"polar-bear",styleClass:"vgt-table striped condensed",columns:k.columns,rows:k.rows,"line-numbers":!0,"search-options":{enabled:!0,externalQuery:k.searchTerm},"select-options":{enabled:!0},onSelectedRowsChange:w.selectionChanged,"pagination-options":{enabled:!0,mode:"records"}},{"table-row":(0,a.w5)((function(e){return["actions"!=e.column.field||k.isSelectedRow?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[k.isShowForNipKhusus?((0,a.wg)(),(0,a.j4)(x,{key:0,color:"success",size:"sm",variant:"outline",onClick:function(t){return w.approveOnePkpt(e.row.idPkpt)},class:"mx-1"},{default:(0,a.w5)((function(){return[m]})),_:2},1032,["onClick"])):(0,a.kq)("",!0),k.isShowForNipKhusus?((0,a.wg)(),(0,a.j4)(x,{key:1,color:"danger",size:"sm",variant:"outline",onClick:function(t){return w.rejectOnePkpt(e.row.idPkpt)},class:"mx-1"},{default:(0,a.w5)((function(){return[f]})),_:2},1032,["onClick"])):(0,a.kq)("",!0)],64)),"namaRendalPelaporan"==e.column.field?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,s.zw)(e.row.namaRendalPelaporan?e.row.namaRendalPelaporan:e.row.namaUnitKerjaPkpt),1)],64)):((0,a.wg)(),(0,a.iD)("span",g,(0,s.zw)(e.formattedRow[e.column.field]),1))]})),_:1},8,["columns","rows","search-options","onSelectedRowsChange"])):(0,a.kq)("",!0)]),(0,a.Wm)(C,{statVisible:k.isDeleteConfirm,title:"Hapus data",msg:"Apakah anda yakin akan menghapus data ini?",onCloseModal:t[4]||(t[4]=function(e){return k.isDeleteConfirm=!1}),onConfirmOk:w.actionDelete},null,8,["statVisible","onConfirmOk"])],64)}var k=n(48534),w=(n(21249),n(21703),n(36133),n(56265)),b=n.n(w),x=n(5044),v=n(6216),C=[{label:"Id",field:"idPkpt",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Kategori",field:"kategori",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Nama KAP",field:"namaKap",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"PJ KAP",field:"namaUnitKerjaKap",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Rendal Pelaporan",field:"namaRendalPelaporan",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Unit Kerja PKPT",field:"namaUnitKerjaPkpt",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Nama PKPT",field:"namaPkpt",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Bidang Pengawasan",field:"namaBidwasPkpt",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"RMP",field:"namaRmp",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"TW Pelaporan Kontributor",field:"triwulan",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Status Rendal",field:"statusRendalPelaporan",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Status MKOT",field:"statusMkot",thClass:"text-sm",tdClass:"text-sm",filterOptions:{enabled:!0,trigger:"enter"}},{label:"Actions",field:"actions",width:"155px",globalSearchDisabled:!0}],P={name:"my-component",components:{Loading:v.Z,ConfirmDelete:x.Z},data:function(){return{searchTerm:"",columns:C,rows:[],loading:!1,isDeleteConfirm:!1,idToDel:null,isShowForNipKhusus:!1,isSelectedRow:!1,selectedRows:[]}},mounted:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadPkpt(),t.next=3,e.$func.isNipAllowToAdd();case 3:e.isShowForNipKhusus=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{selectionChanged:function(e){this.isSelectedRow=e.selectedRows.length>0,this.selectedRows=e.selectedRows},approveAllPkpt:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b()({method:"POST",baseURL:e.$apiAddress,url:"/api/approvepkpt/accall",data:{ids:e.selectedRows.map((function(e){return e.idPkpt}))},params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});case 3:n=t.sent,200==n.status&&(e.loadPkpt(),e.toastSuccess(n.data.message)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.toastError(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},rejectAllPkpt:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b()({method:"POST",baseURL:e.$apiAddress,url:"/api/approvepkpt/tolakall",data:{ids:e.selectedRows.map((function(e){return e.idPkpt}))},params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});case 3:n=t.sent,200==n.status&&(e.loadPkpt(),e.toastSuccess(n.data.message)),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.toastError(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},approveOnePkpt:function(e){var t=this;return(0,k.Z)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b()({method:"POST",baseURL:t.$apiAddress,url:"/api/approvepkpt/acc/".concat(e),params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});case 3:a=n.sent,200==a.status&&(t.loadPkpt(),t.toastSuccess(a.data.message)),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.toastError(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},rejectOnePkpt:function(e){var t=this;return(0,k.Z)(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b()({method:"POST",baseURL:t.$apiAddress,url:"/api/approvepkpt/tolak/".concat(e),params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});case 3:a=n.sent,200==a.status&&(t.loadPkpt(),t.toastSuccess(a.data.message)),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.toastError(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},loadPkpt:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,b()({method:"GET",baseURL:e.$apiAddress,url:"/api/approvepkpt",params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});case 3:return n=t.sent,t.next=6,n.data;case 6:if(a=t.sent,200==n.status){t.next=10;break}throw r=new Error(a.message||"Failed to fetch data"),r;case 10:e.rows=a,e.loading=!1;case 12:case"end":return t.stop()}}),t)})))()},resDelAction:function(e){this.idToDel=e,this.isDeleteConfirm=!0},actionDelete:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b()({method:"DELETE",baseURL:e.$apiAddress,url:"/api/pkpt/".concat(e.idToDel),params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});case 3:n=t.sent,e.isDeleteConfirm=!1,200==n.status&&(e.loadPkpt(),e.toastSuccess("Berhasil menghapus data")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.toastError(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},toastSuccess:function(e){this.$toast.open({message:e,type:"success",position:"top-right",duration:3e3})},toastError:function(e){this.$toast.open({message:e,type:"error",position:"top-right",duration:3e3})}}},y=n(40089);const R=(0,y.Z)(P,[["render",h]]);var S=R}}]);
//# sourceMappingURL=218-legacy.6102114d.js.map