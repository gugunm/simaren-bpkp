"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[875],{57875:function(e,t,a){a.d(t,{Z:function(){return at}});a(92222);var n=a(73396),i=a(49242),o=a(87139),r={key:0,class:"h4 mb-4"},s={key:1,class:"h4 mb-4"},l=(0,n.Uk)("ID "),u={class:"col-sm-2"},d=(0,n.Uk)("Nama KAP "),c=(0,n._)("span",{class:"text-red-500"},"*",-1),p={class:"col-sm-9"},m={key:0},f={key:1},k=(0,n.Uk)("Unit Kerja PJ KAP "),h=(0,n._)("span",{class:"text-red-500"},"*",-1),w={class:"col-sm-2"},b={class:"col-sm-2"},g=(0,n.Uk)(" + PKPT "),K={key:1},P=(0,n.Uk)("Tahun "),_=(0,n._)("span",{class:"text-red-500"},"*",-1),x={class:"col-sm-2"},v=(0,n.Uk)("Informasi Yang Diharapkan"),R=(0,n._)("span",{class:"text-red-500"},"*",-1),U={class:"col-sm-9"},D=(0,n.Uk)("Unit Kerja"),y=(0,n._)("span",{class:"text-red-500"},"*",-1),W={class:"col-sm-4"},j=(0,n.Uk)("Nama PKPT"),S=(0,n._)("span",{class:"text-red-500"},"*",-1),V={class:"col-sm-9"},I=(0,n.Uk)("BIDWAS"),B=(0,n._)("span",{class:"text-red-500"},"*",-1),L={class:"col-sm-9"},T=(0,n.Uk)("Informasi Yang Diharapkan level Bidwas"),O=(0,n._)("span",{class:"text-red-500"},"*",-1),C={class:"col-sm-9"},J=(0,n.Uk)("Rendal Pelaporan"),$=(0,n._)("span",{class:"text-red-500"},"*",-1),A={class:"col-sm-4"},E=(0,n.Uk)("HP "),Z=(0,n._)("span",{class:"text-red-500"},"*",-1),q={class:"col-sm-3"},N=(0,n.Uk)("Jenis Kegiatan "),F=(0,n._)("span",{class:"text-red-500"},"*",-1),z={class:"col-sm-4"},H=(0,n.Uk)("Sumber Dana "),M=(0,n._)("span",{class:"text-red-500"},"*",-1),Y=["id","value","onChange"],G=["for"],Q=(0,n.Uk)("Total Dana "),X=(0,n._)("span",{class:"text-red-500"},"*",-1),ee={class:"col-sm-4"},te=(0,n.Uk)("RMP"),ae=(0,n._)("span",{class:"text-red-500"},"*",-1),ne={class:"col-sm-4"},ie=(0,n.Uk)("RPL Triwulan "),oe=(0,n._)("span",{class:"text-red-500"},"*",-1),re={class:"col-sm-4"},se=(0,n.Uk)("Pilih IKK "),le=(0,n._)("span",{class:"text-red-500"},"*",-1),ue={class:"col-sm-8"},de=(0,n.Uk)("Pilih RO "),ce=(0,n._)("span",{class:"text-red-500"},"*",-1),pe={class:"col-sm-8"},me=(0,n.Uk)("Jumlah Lokus "),fe=(0,n._)("span",{class:"text-red-500"},"*",-1),ke={class:"col-sm-4"},he={class:"col-sm-4"},we={class:"col-sm-12"},be={key:0},ge=(0,n.Uk)(" Simpan PKPT "),Ke={key:1},Pe={key:2,class:"flex flex-col mt-4"},_e={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},xe={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},ve={class:"shadow-sm overflow-hidden border-b border-gray-200 sm:rounded-lg"},Re={class:"min-w-full divide-y divide-gray-200"},Ue=(0,n._)("thead",{class:"bg-gray-50"},[(0,n._)("tr",null,[(0,n._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nama PKPT "),(0,n._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit Kerja "),(0,n._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Bidang Was "),(0,n._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," TW Pelaporan "),(0,n._)("th",{scope:"col",class:"relative px-6 py-3"},[(0,n._)("span",{class:"sr-only"},"Hapus")])])],-1),De={class:"bg-white divide-y divide-gray-200"},ye={class:"px-6 py-4"},We={class:"text-sm text-gray-900"},je={class:"px-6 py-4 whitespace-nowrap"},Se={class:"text-sm text-gray-900"},Ve={class:"px-6 py-4"},Ie={class:"text-sm text-gray-900"},Be={class:"px-6 py-4 whitespace-nowrap"},Le={class:"text-sm text-gray-900"},Te={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Oe=["onClick"],Ce=(0,n.Uk)(" Batal "),Je=(0,n.Uk)(" Reset "),$e=(0,n._)("p",null,"Simpan",-1),Ae={key:0},Ee=(0,n.Uk)(" Ubah PKPT "),Ze={key:1};function qe(e,t,a,qe,Ne,Fe){var ze=(0,n.up)("Loading"),He=(0,n.up)("CFormLabel"),Me=(0,n.up)("CFormInput"),Ye=(0,n.up)("CRow"),Ge=(0,n.up)("VueMultiselect"),Qe=(0,n.up)("CButton"),Xe=(0,n.up)("CFormTextarea"),et=(0,n.up)("CCol"),tt=(0,n.up)("CSpinner"),at=(0,n.up)("CForm"),nt=(0,n.up)("CCardBody"),it=(0,n.up)("CCard");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(ze,{active:Ne.loading,"onUpdate:active":t[0]||(t[0]=function(e){return Ne.loading=e}),"is-full-page":!0},null,8,["active"]),(0,n.Wm)(it,{class:"mb-4"},{default:(0,n.w5)((function(){return[(0,n.Wm)(nt,{class:"p-4"},{default:(0,n.w5)((function(){return["create"==a.mode?((0,n.wg)(),(0,n.iD)("h4",r,"Tambah PKPT")):"update"==a.mode?((0,n.wg)(),(0,n.iD)("h4",s,"Edit PKPT")):(0,n.kq)("",!0),"update"==a.mode?((0,n.wg)(),(0,n.j4)(Ye,{key:2,class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[l]})),_:1}),(0,n._)("div",u,[(0,n.Wm)(Me,{modelValue:Ne.editData.idPkpt,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Ne.editData.idPkpt=e}),readonly:""},null,8,["modelValue"])])]})),_:1})):(0,n.kq)("",!0),(0,n.Wm)(at,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"nama-kap",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[d,c]})),_:1}),(0,n._)("div",p,["update"==a.mode?((0,n.wg)(),(0,n.iD)("div",m,[Ne.selectedKap?((0,n.wg)(),(0,n.j4)(Me,{key:0,type:"text",value:Ne.selectedKap.namaKap,readonly:""},null,8,["value"])):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",f,[Fe.isReadOnlyKap?((0,n.wg)(),(0,n.j4)(Me,{key:0,type:"text",value:Ne.selectedKap.namaKap,readonly:""},null,8,["value"])):((0,n.wg)(),(0,n.j4)(Ge,{key:1,id:"nama-kap",placeholder:"Pilih KAP",label:"namaKap",modelValue:Ne.selectedKap,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Ne.selectedKap=e}),options:Ne.optionsKap,"track-by":"namaKap",deselectLabel:"",selectLabel:""},null,8,["modelValue","options"]))]))])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"pj-kap",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[k,h]})),_:1}),(0,n._)("div",w,[(0,n.Wm)(Me,{type:"text",id:"pj-kap",modelValue:Ne.pjKap,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Ne.pjKap=e}),readonly:"",placeholder:"sesuai kap"},null,8,["modelValue"])])]})),_:1}),"create"==a.mode?((0,n.wg)(),(0,n.j4)(Ye,{key:0,class:"mb-4 mt-4"},{default:(0,n.w5)((function(){return[(0,n._)("div",b,[(0,n.Wm)(Qe,{type:"button",class:"px-4 py-2",color:"info",size:"sm",onClick:t[4]||(t[4]=function(e){return Ne.isOpenForm=!Ne.isOpenForm}),variant:"outline"},{default:(0,n.w5)((function(){return[g]})),_:1})])]})),_:1})):(0,n.kq)("",!0),Ne.isOpenForm?((0,n.wg)(),(0,n.iD)("div",K,[(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[P,_]})),_:1}),(0,n._)("div",x,[(0,n.Wm)(Me,{type:"number",id:"tahun",modelValue:Ne.form.tahun,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Ne.form.tahun=e}),readonly:"",required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"info-pkpt",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[v,R]})),_:1}),(0,n._)("div",U,[(0,n.Wm)(Xe,{id:"info-pkpt",rows:"3",modelValue:Ne.infoDiharapkanPkpt,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Ne.infoDiharapkanPkpt=e}),readonly:"",required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"unit-kerja",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[D,y]})),_:1}),(0,n._)("div",W,[(0,n.Wm)(Ge,{id:"unit-kontributor",modelValue:Ne.selectedUnitPkpt,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Ne.selectedUnitPkpt=e}),options:Ne.optionsUnitPkpt,placeholder:"Pilih Unit Kerja",label:"namaUnitKontributor","track-by":"namaUnitKontributor","custom-label":Fe.viewSelectUnitPkpt,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"nama-pkpt",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[j,S]})),_:1}),(0,n._)("div",V,[(0,n.Wm)(Xe,{id:"nama-pkpt",modelValue:Ne.form.namaPkpt,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Ne.form.namaPkpt=e}),rows:"3",required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"bidwas",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[I,B]})),_:1}),(0,n._)("div",L,[(0,n.Wm)(Ge,{id:"bidwas",modelValue:Ne.selectedBidwas,"onUpdate:modelValue":t[9]||(t[9]=function(e){return Ne.selectedBidwas=e}),options:Ne.optionsBidwas,placeholder:"Pilih Bidwas",label:"namaBidwas","track-by":"namaBidwas",selectLabel:"",deselectLabel:""},null,8,["modelValue","options"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"info-pkpt-bidwas",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[T,O]})),_:1}),(0,n._)("div",C,[(0,n.Wm)(Xe,{id:"info-pkpt-bidwas",rows:"3",modelValue:Ne.form.infoBidwas,"onUpdate:modelValue":t[10]||(t[10]=function(e){return Ne.form.infoBidwas=e}),required:""},null,8,["modelValue"])])]})),_:1}),Fe.isUnitPkptPerwakilan||Ne.isSektorAppd?((0,n.wg)(),(0,n.j4)(Ye,{key:0,class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"rendal-pelaporan",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[J,$]})),_:1}),(0,n._)("div",A,[Ne.isSektorAppd?((0,n.wg)(),(0,n.j4)(Me,{key:0,value:"D302",readonly:""})):((0,n.wg)(),(0,n.j4)(Ge,{key:1,id:"rendal-pelaporan",modelValue:Ne.selectedRendPelaporan,"onUpdate:modelValue":t[11]||(t[11]=function(e){return Ne.selectedRendPelaporan=e}),options:Ne.optionsRendPelaporan,placeholder:"Pilih Rendal Pelaporan",label:"namaUnitKontributor","track-by":"namaUnitKontributor","custom-label":Fe.viewSelectUnitPkpt,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"]))])]})),_:1})):(0,n.kq)("",!0),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"hp",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[E,Z]})),_:1}),(0,n._)("div",q,[(0,n.Wm)(Me,{type:"number",modelValue:Ne.form.hp,"onUpdate:modelValue":t[12]||(t[12]=function(e){return Ne.form.hp=e}),id:"hp",required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-4"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"jenis-kegiatan",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[N,F]})),_:1}),(0,n._)("div",z,[(0,n.Wm)(Ge,{id:"jenis-kegiatan",modelValue:Ne.selectedJenisKegiatan,"onUpdate:modelValue":t[13]||(t[13]=function(e){return Ne.selectedJenisKegiatan=e}),options:Ne.optionsJenisKegiatan,placeholder:"Pilih Jenis Kegiatan",label:"jenisKegiatanName","track-by":"jenisKegiatanName",selectLabel:"",deselectLabel:""},null,8,["modelValue","options"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(et,{sm:"3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"sumber-dana",class:"col-form-label"},{default:(0,n.w5)((function(){return[H,M]})),_:1})]})),_:1}),(0,n.Wm)(et,{sm:"9"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Ne.optionsDana,(function(e){return(0,n.wg)(),(0,n.j4)(Ye,{key:e.deskripsi,class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(et,{sm:"3"},{default:(0,n.w5)((function(){return[(0,n.wy)((0,n._)("input",{class:"mr-3",type:"checkbox",id:e.deskripsi,value:"".concat(e.deskripsi,"#").concat(e.id),"onUpdate:modelValue":t[14]||(t[14]=function(e){return Ne.choosenDana=e}),onChange:function(t){return Fe.changeCheckedDana(e)}},null,40,Y),[[i.e8,Ne.choosenDana]]),(0,n._)("label",{for:e.deskripsi},(0,o.zw)(e.deskripsi),9,G)]})),_:2},1024),(0,n.Wm)(et,{sm:"5"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Me,{type:"number",modelValue:e.nilai,"onUpdate:modelValue":function(t){return e.nilai=t},readonly:!e.status},null,8,["modelValue","onUpdate:modelValue","readonly"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"dana",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[Q,X]})),_:1}),(0,n._)("div",ee,[(0,n.Wm)(Me,{value:e.$func.thousandSeprator(Fe.totalDana),id:"dana",readonly:""},null,8,["value"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-2"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"rmp",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[te,ae]})),_:1}),(0,n._)("div",ne,[(0,n.Wm)(Ge,{id:"rmp",modelValue:Ne.selectedRmp,"onUpdate:modelValue":t[15]||(t[15]=function(e){return Ne.selectedRmp=e}),options:Ne.optionsRmp,placeholder:"Pilih RMP",label:"deskripsi","track-by":"deskripsi"},null,8,["modelValue","options"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"tw",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[ie,oe]})),_:1}),(0,n._)("div",re,[(0,n.Wm)(Ge,{id:"tw",modelValue:Ne.form.triwulan,"onUpdate:modelValue":t[16]||(t[16]=function(e){return Ne.form.triwulan=e}),options:Ne.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-4"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"pilih-ikk",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[se,le]})),_:1}),(0,n._)("div",ue,[(0,n.Wm)(Ge,{id:"pilih-ikk",modelValue:Ne.selectedIkk,"onUpdate:modelValue":t[17]||(t[17]=function(e){return Ne.selectedIkk=e}),options:Ne.optionsIkk,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih IKK",label:"uraianIkk","track-by":"uraianIkk","custom-label":Fe.viewSelectIkk,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-4"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"pilih-ro",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[de,ce]})),_:1}),(0,n._)("div",pe,[(0,n.Wm)(Ge,{id:"pilih-ro",modelValue:Ne.selectedRo,"onUpdate:modelValue":t[18]||(t[18]=function(e){return Ne.selectedRo=e}),options:Ne.optionsRo,placeholder:"Pilih RO",label:"uraianRo","track-by":"uraianRo","custom-label":Fe.viewSelectRo,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,n.Wm)(Ye,{class:"mb-4"},{default:(0,n.w5)((function(){return[(0,n.Wm)(He,{for:"jumlah-lokus",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[me,fe]})),_:1}),(0,n._)("div",ke,[(0,n.Wm)(Me,{type:"number",id:"jumlah-lokus",modelValue:Ne.form.jumlahLokus,"onUpdate:modelValue":t[19]||(t[19]=function(e){return Ne.form.jumlahLokus=e}),placeholder:"Jumlah Lokus",required:""},null,8,["modelValue"])]),(0,n._)("div",he,[(0,n.Wm)(Me,{type:"text",id:"satuan-lokus",modelValue:Ne.form.satuanLokus,"onUpdate:modelValue":t[20]||(t[20]=function(e){return Ne.form.satuanLokus=e}),placeholder:"Satuan Lokus",required:""},null,8,["modelValue"])])]})),_:1}),"create"==a.mode?((0,n.wg)(),(0,n.j4)(Ye,{key:1,class:"mb-4 mt-4 text-center"},{default:(0,n.w5)((function(){return[(0,n._)("div",we,[(0,n.Wm)(Qe,{type:"button",class:"px-4 text-white",color:"success",size:"sm",onClick:Fe.submit},{default:(0,n.w5)((function(){return[Ne.loading?((0,n.wg)(),(0,n.iD)("div",be,[(0,n.Wm)(tt,{color:"white",size:"sm",class:"mr-2"}),ge])):((0,n.wg)(),(0,n.iD)("span",Ke,"Simpan PKPT"))]})),_:1},8,["onClick"])])]})),_:1})):(0,n.kq)("",!0)])):(0,n.kq)("",!0),"update"!=a.mode?((0,n.wg)(),(0,n.iD)("div",Pe,[(0,n._)("div",_e,[(0,n._)("div",xe,[(0,n._)("div",ve,[(0,n._)("table",Re,[Ue,(0,n._)("tbody",De,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Ne.pkpts,(function(e,t){return(0,n.wg)(),(0,n.iD)("tr",{key:e.nama},[(0,n._)("td",ye,[(0,n._)("div",We,(0,o.zw)(e.nama_pkpt),1)]),(0,n._)("td",je,[(0,n._)("div",Se,(0,o.zw)(e.nama_kontributor_pkpt),1)]),(0,n._)("td",Ve,[(0,n._)("div",Ie,(0,o.zw)(e.nama_bidwas),1)]),(0,n._)("td",Be,[(0,n._)("div",Le,(0,o.zw)(e.triwulan),1)]),(0,n._)("td",Te,[(0,n._)("button",{class:"text-red-600 hover:text-red-900",onClick:function(a){return Fe.deletePkpt(t,e.id)}}," Hapus ",8,Oe)])])})),128))])])])])])])):(0,n.kq)("",!0),(0,n.Wm)(Ye,{class:"mt-8 view-form"},{default:(0,n.w5)((function(){return[(0,n.Wm)(et,{sm:"12",lg:"6",class:"mb-3"},{default:(0,n.w5)((function(){return["view"!=a.mode?((0,n.wg)(),(0,n.j4)(Qe,{key:0,variant:"outline",color:"dark",onClick:t[21]||(t[21]=function(t){return e.$router.push("/pkpt")}),class:"px-5"},{default:(0,n.w5)((function(){return[Ce]})),_:1})):(0,n.kq)("",!0)]})),_:1}),"create"==a.mode||"update"==a.mode?((0,n.wg)(),(0,n.j4)(et,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Qe,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:Fe.reset},{default:(0,n.w5)((function(){return[Je]})),_:1},8,["onClick"]),"create"==a.mode?((0,n.wg)(),(0,n.j4)(Qe,{key:0,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:Fe.submitToBack},{default:(0,n.w5)((function(){return[$e]})),_:1},8,["onClick"])):((0,n.wg)(),(0,n.j4)(Qe,{key:1,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:Fe.submit},{default:(0,n.w5)((function(){return[Ne.loading?((0,n.wg)(),(0,n.iD)("div",Ae,[(0,n.Wm)(tt,{color:"white",size:"sm",class:"mr-2"}),Ee])):((0,n.wg)(),(0,n.iD)("p",Ze,"Ubah PKPT"))]})),_:1},8,["onClick"]))]})),_:1})):(0,n.kq)("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})],64)}var Ne=a(89584),Fe=a(95082),ze=a(48534),He=(a(36133),a(41539),a(26699),a(32023),a(21249),a(9653),a(57327),a(69826),a(54747),a(40561),a(69600),a(56265)),Me=a.n(He),Ye=a(16368),Ge=a(6216),Qe=[{id:60,deskripsi:"Belum Ditentukan"},{id:1,deskripsi:"Januari"},{id:2,deskripsi:"Februari"},{id:3,deskripsi:"Maret"},{id:4,deskripsi:"April"},{id:5,deskripsi:"Mei"},{id:6,deskripsi:"Juni"},{id:7,deskripsi:"Juli"},{id:8,deskripsi:"Agustus"},{id:9,deskripsi:"September"},{id:10,deskripsi:"Oktober"},{id:11,deskripsi:"November"},{id:12,deskripsi:"Desember"}],Xe={components:{VueMultiselect:Ye.ZP,Loading:Ge.Z},props:["mode","idPkpt"],data:function(){return{isSektorAppd:!1,idKap:null,pjKap:null,form:this.getEmptyForm(),submitted:!1,loading:!1,isOpenForm:!0,editData:{},selectedKap:null,optionsKap:[],selectedKontributor:null,optionsKontributor:[],selectedBidwas:null,optionsBidwas:[],optionsJenisKegiatan:[],selectedJenisKegiatan:null,optionsIkk:[],selectedIkk:null,optionsRo:[],selectedRo:null,refOptionsDana:[],optionsDana:[],choosenDana:[],selectedRmp:null,optionsRmp:Qe,selectedUnitPkpt:null,optionsUnitPkpt:[],selectedRendPelaporan:null,optionsRendPelaporan:[],optionsTriwulan:[1,2,3,4],infoDiharapkanPkpt:null,pkpts:[]}},watch:{selectedKap:function(e){e&&(e.topiks.some((function(e){return 28==e.idSektor}))?(this.isSektorAppd=!0,this.form.idRendPelaporan=339):(this.isSektorAppd=!1,"create"==this.mode&&(this.form.idRendPelaporan=0)),this.idKap=e.idKap,this.pjKap=e.pjKap,this.getOptionsUnitPkpt())},selectedUnitPkpt:function(e){e&&(this.form.idTopikOrKontributor=e.idKontributor,this.form.idUnitKerja=e.idUnitKontributor,this.form.namaUnitKerja=e.namaUnitKontributor,this.form.peranPkpt=e.peranPkpt,this.infoDiharapkanPkpt=e.infoKontributor,this.selectedBidwas=null,this.optionsBidwas=[],this.loadBidwas(this.form.idUnitKerja),this.loadListRo(this.form.idUnitKerja),e.namaUnitKontributor.includes("PW")&&this.getOptionsRendPelaporan())},selectedRendPelaporan:function(e){e&&(this.form.idRendPelaporan=e.idUnitKontributor)},selectedBidwas:function(e){e&&(console.log(this.form),this.form.idBidwas=e.id,this.form.namaBidwasPkpt=e.namaBidwas,this.getOptionsJenisKegiatan())},selectedJenisKegiatan:function(e){e&&(this.form.jenisKegiatanId=e.jenisKegiatanId,this.form.jenisKegiatanName=e.jenisKegiatanName)},selectedIkk:function(e){console.log("SELECTED IKK"),console.log(e),e&&(this.form.kodeIkk=e.map((function(e){return e.kodeIkk})))},selectedRo:function(e){e&&(this.form.kodeRo=e.kodeRo,this.form.uraianRo=e.uraianRo)},selectedRmp:function(e){e&&(this.form.idRmp=e.id,this.form.namaRmp=e.deskripsi)}},computed:{isReadOnlyKap:function(){return this.pkpts.length>0},isUnitPkptPerwakilan:function(){return!!this.selectedUnitPkpt&&!!this.selectedUnitPkpt.namaUnitKontributor.includes("PW")},totalDana:function(){return this.optionsDana.length>0?this.optionsDana.reduce((function(e,t){var a=t.nilai;return e+Number(a)}),0):0}},mounted:function(){var e=this;return(0,ze.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.tahun=localStorage.tahun,t.next=3,e.$store.dispatch("loadListKap");case 3:return e.optionsKap=t.sent,t.next=6,e.$store.dispatch("loadListIkk");case 6:return e.optionsIkk=t.sent,t.next=9,e.$store.dispatch("loadListSumberDana");case 9:if(a=t.sent,e.refOptionsDana=a.map((function(t){return{id:t.idSumberDana,deskripsi:t.namaSumberDana,nilai:0,status:52==t.idSumberDana&&"create"==e.mode}})),e.optionsDana=e.refOptionsDana.map((function(e){return(0,Fe.Z)({},e)})),"create"!=e.mode){t.next=16;break}e.choosenDana.push("APBN#52"),t.next=41;break;case 16:if("update"!=e.mode){t.next=41;break}return e.loading=!0,t.next=20,e.loadPkptById();case 20:return e.selectedKap=e.optionsKap.filter((function(t){return t.idKap==e.idKap}))[0],t.next=23,e.getOptionsUnitPkpt();case 23:if(e.selectedUnitPkpt=e.optionsUnitPkpt.filter((function(t){return t.idUnitKontributor==e.form.idUnitKerja}))[0],!e.selectedUnitPkpt.namaUnitKontributor.includes("PW")){t.next=28;break}return t.next=27,e.getOptionsRendPelaporan();case 27:e.selectedRendPelaporan=e.optionsRendPelaporan.filter((function(t){return t.idUnitKontributor==e.form.idRendPelaporan}))[0];case 28:return t.next=30,e.loadBidwas(e.form.idUnitKerja);case 30:return e.selectedBidwas=e.optionsBidwas.filter((function(t){return t.id==e.form.idBidwas}))[0],t.next=33,e.getOptionsJenisKegiatan();case 33:return e.selectedJenisKegiatan=e.optionsJenisKegiatan.filter((function(t){return t.jenisKegiatanId==e.form.jenisKegiatanId}))[0],e.selectedIkk=e.optionsIkk.filter((function(t){return e.form.kodeIkk.includes(t.kodeIkk)})),t.next=37,e.loadListRo(e.form.idUnitKerja);case 37:e.selectedRo=e.optionsRo.filter((function(t){return t.kodeRo==e.form.kodeRo}))[0],e.selectedRmp=e.optionsRmp.filter((function(t){return t.id==e.form.idRmp}))[0],e.optionsDana=e.optionsDana.map((function(t){var a=e.form.dataDana.find((function(e){return e.idSumberDanaPkpt==t.id}));return a&&(t.nilai=a.jumlahDanaPkpt,t.status=!0,e.choosenDana.push("".concat(t.deskripsi,"#").concat(t.id))),t})),e.selectedIkk=e.optionsIkk.filter((function(t){return e.form.kodeIkk.includes(t.kodeIkk)}));case 41:case"end":return t.stop()}}),t)})))()},methods:{changeCheckedDana:function(e){e.status=!e.status,0==e.status&&(e.nilai=0)},getOptionsUnitPkpt:function(){var e=this;return(0,ze.Z)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadSelectUnitPkpt",{idKap:e.idKap});case 2:a=t.sent,n=[],a.forEach((function(e){n.push.apply(n,(0,Ne.Z)(e.kontributors))})),e.optionsUnitPkpt=n;case 6:case"end":return t.stop()}}),t)})))()},getOptionsJenisKegiatan:function(){var e=this;return(0,ze.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadListJenisKegiatan",{idBidwas:e.form.idBidwas});case 2:a=t.sent,e.optionsJenisKegiatan=a;case 4:case"end":return t.stop()}}),t)})))()},getOptionsRendPelaporan:function(){var e=this;return(0,ze.Z)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadSelectUnitPkpt",{idKap:e.idKap});case 2:a=t.sent,n=[],a.forEach((function(e){n.push.apply(n,(0,Ne.Z)(e.kontributors))})),e.optionsRendPelaporan=n.filter((function(e){return!e.namaUnitKontributor.includes("PW")}));case 6:case"end":return t.stop()}}),t)})))()},loadBidwas:function(e){var t=this;return(0,ze.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("loadBidwas",{idUnit:e});case 2:t.optionsBidwas=a.sent;case 3:case"end":return a.stop()}}),a)})))()},loadListRo:function(e){var t=this;return(0,ze.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("loadListRo",{idUnit:e});case 2:t.optionsRo=a.sent;case 3:case"end":return a.stop()}}),a)})))()},viewSelectSearch:function(e){var t=e.alias,a=e.deskripsi;return"".concat(t," - ").concat(a)},viewSelectUnitPkpt:function(e){var t=e.namaUnitKontributor,a=e.peranPkpt;return"".concat(t," - ").concat(1==a?"Koordinator Topik":"Kontributor Topik")},viewSelectIkk:function(e){var t=e.uraianIkk,a=e.unitKerjaIkk;return"".concat(t," | (").concat(a,")")},viewSelectRo:function(e){var t=e.uraianRo;return"".concat(t)},deletePkpt:function(e,t){var a=this;return(0,ze.Z)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Me()({method:"DELETE",baseURL:a.$apiAddress,url:"/api/pkpt/".concat(t),params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});case 3:i=n.sent,200==i.status&&(a.toastSuccess("Berhasil menghapus data"),a.pkpts.splice(e)),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),a.toastError(n.t0.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},submitToBack:function(){var e=this;this.pkpts.length>0?setTimeout((function(){e.$router.push("/pkpt"),e.toastSuccess("Berhasil membuat PKPT")}),500):this.toastWarning("Selesaikan dahulu pembuatan PKPT")},submit:function(){var e=this;return(0,ze.Z)(regeneratorRuntime.mark((function t(){var a,n,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$func.isNullOfObjElement(e.form),!a){t.next=34;break}if(e.submitted=!0,n=e.appendToFormData(),t.prev=4,"create"!=e.mode){t.next=20;break}return e.loading=!0,t.next=9,Me()({method:"POST",baseURL:e.$apiAddress,url:"/api/pkpt",data:n,params:{token:localStorage.getItem("token")}});case 9:return i=t.sent,t.next=12,i.data;case 12:o=t.sent,e.optionsDana.filter((function(e){return e.nilai>0})).forEach(function(){var t=(0,ze.Z)(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Me()({method:"POST",baseURL:e.$apiAddress,url:"/api/danapkpt",data:{idPkpt:o.id_pkpt,idSumberDana:a.id,namaSumberDana:a.deskripsi,nilaiSumberDana:a.nilai},params:{token:localStorage.getItem("token")}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),200==i.status?(e.loading=!1,e.toastSuccess("Berhasil menyimpan data")):e.error="Gagal menyimpan data",e.pkpts.push(o),e.reset(),e.form.tahun=localStorage.tahun,t.next=27;break;case 20:if("update"!=e.mode){t.next=27;break}return e.loading=!0,t.next=24,Me()({method:"POST",baseURL:e.$apiAddress,url:"/api/pkpt/".concat(e.idPkpt),data:n,params:{token:localStorage.getItem("token")}});case 24:r=t.sent,e.optionsDana.filter((function(e){return e.nilai>0})).forEach(function(){var t=(0,ze.Z)(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Me()({method:"POST",baseURL:e.$apiAddress,url:"/api/danapkpt",data:{idPkpt:e.idPkpt,idSumberDana:a.id,namaSumberDana:a.deskripsi,nilaiSumberDana:a.nilai},params:{token:localStorage.getItem("token")}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),200!=r.status?e.error="Gagal merubah data":(e.loading=!1,e.$router.push("/pkpt"),e.toastSuccess("Berhasil merubah data"));case 27:t.next=32;break;case 29:t.prev=29,t.t0=t["catch"](4),setTimeout((function(){e.loading=!1,e.toastError("Terjadi kesalahan saat submit data")}),500);case 32:t.next=35;break;case 34:e.toastWarning("Lengkapi data sebelum submit!");case 35:case"end":return t.stop()}}),t,null,[[4,29]])})))()},reset:function(){this.form=this.getEmptyForm(),this.submitted=!1,this.selectedUnitPkpt=null,this.infoDiharapkanPkpt=null,this.isReadOnlyKap||(this.pjKap=null,this.selectedKap=null),this.selectedKontributor=null,this.selectedBidwas=null,this.selectedJenisKegiatan=null,this.selectedIkk=null,this.selectedRo=null,this.selectedRmp=null,this.choosenDana=[],this.optionsDana=this.refOptionsDana.map((function(e){return(0,Fe.Z)({},e)}))},getEmptyForm:function(){return{tahun:null,idTopikOrKontributor:null,peranPkpt:null,idUnitKerja:null,namaPkpt:null,idBidwas:null,idRendPelaporan:0,hp:null,jenisKegiatanId:null,jenisKegiatanName:null,kodeIkk:null,kodeRo:null,uraianRo:null,infoBidwas:null,jumlahLokus:null,satuanLokus:null,idSumberDana:52,idRmp:null,namaRmp:null,triwulan:[],namaBidwasPkpt:null,namaUnitKerja:null}},appendToFormData:function(){var e=new FormData;return"update"==this.mode?e.append("_method","PUT"):(e.append("idKap",this.idKap),e.append("tahunPkpt",this.form.tahun)),e.append("idRendalPelaporan",this.form.idRendPelaporan),e.append("idUnitKerja",this.form.idUnitKerja),e.append("namaUnitKerja",this.form.namaUnitKerja),e.append("namaPkpt",this.form.namaPkpt),e.append("idBidwas",this.form.idBidwas),e.append("namaBidwasPkpt",this.form.namaBidwasPkpt),e.append("triwulan",this.form.triwulan),e.append("hp",this.form.hp),e.append("jenisKegiatanId",this.form.jenisKegiatanId),e.append("jenisKegiatanName",this.form.jenisKegiatanName),e.append("kodeIkk",this.form.kodeIkk.join(",")),e.append("kodeRo",this.form.kodeRo),e.append("uraianRo",this.form.uraianRo),e.append("infoBidwas",this.form.infoBidwas),e.append("jumlahLokus",this.form.jumlahLokus),e.append("satuanLokus",this.form.satuanLokus),e.append("dana",this.totalDana),e.append("idSumberDana",this.form.idSumberDana),e.append("namaSumberDana",this.choosenDana.join(",")),e.append("idRmp",this.form.idRmp),e.append("namaRmp",this.form.namaRmp),e.append("peranPkpt",this.form.peranPkpt),e.append("idTopikOrKontributor",this.form.idTopikOrKontributor),e.append("nip",localStorage.getItem("nip")),e},loadPkptById:function(){var e=this;return(0,ze.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Me()({method:"GET",baseURL:e.$apiAddress,url:"/api/pkpt/".concat(e.idPkpt),params:{token:localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.data;case 6:e.editData=t.sent,console.log("DATA"),console.log(e.editData),200==a.status&&(e.idKap=e.editData.idKap,e.form={tahun:e.editData.tahunPkpt,idTopikOrKontributor:0==e.editData.peranPkpt?e.editData.idKontributor:e.editData.idTopik,peranPkpt:e.editData.peranPkpt,idUnitKerja:e.editData.idUnitKerja,namaPkpt:e.editData.namaPkpt,idBidwas:e.editData.idBidwas,hp:e.editData.hp,jenisKegiatanId:e.editData.jenisKegiatanId,jenisKegiatanName:e.editData.jenisKegiatanName,kodeIkk:e.editData.kodeIkk,kodeRo:e.editData.kodeRo,uraianRo:e.editData.uraianRo,infoBidwas:e.editData.infoBidwas,jumlahLokus:e.editData.jumlahLokus,satuanLokus:e.editData.satuanLokus,dana:e.editData.dana,idSumberDana:e.editData.idSumberDana,idRmp:e.editData.idRmp,triwulan:e.editData.triwulan,idRendPelaporan:e.editData.idRendalPelaporan,dataDana:e.editData.dataDana}),e.loading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.toastError(t.t0.message),e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},toastSuccess:function(e){this.$toast.open({message:e,type:"success",position:"top-right",duration:3e3})},toastError:function(e){this.$toast.open({message:e,type:"error",position:"top-right",duration:3e3})},toastWarning:function(e){this.$toast.open({message:e,type:"warning",position:"top-right",duration:3e3})}}},et=a(40089);const tt=(0,et.Z)(Xe,[["render",qe]]);var at=tt}}]);
//# sourceMappingURL=875-legacy.c7fee0fe.js.map