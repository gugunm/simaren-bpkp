"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[148],{6148:function(t,a,e){e.d(a,{Z:function(){return Ot}});var i=e(3396),s=e(7139);const l={key:0,class:"h4 mb-4"},o={key:1,class:"h4 mb-4"},n=(0,i.Uk)("ID "),d={class:"col-sm-2"},p=(0,i.Uk)("Nama KAP "),r=(0,i._)("span",{class:"text-red-500"},"*",-1),m={class:"col-sm-9"},u={key:0},c={key:1},h=(0,i.Uk)("Unit Kerja PJ KAP "),k=(0,i._)("span",{class:"text-red-500"},"*",-1),f={class:"col-sm-2"},w={class:"col-sm-2"},b=(0,i.Uk)(" + PKPT "),P={key:1},_=(0,i.Uk)("Tahun "),g=(0,i._)("span",{class:"text-red-500"},"*",-1),y={class:"col-sm-2"},K=(0,i.Uk)("Unit Kerja"),U=(0,i._)("span",{class:"text-red-500"},"*",-1),x={class:"col-sm-4"},D=(0,i.Uk)("Nama PKPT"),v=(0,i._)("span",{class:"text-red-500"},"*",-1),W={class:"col-sm-9"},R=(0,i.Uk)("BIDWAS"),S=(0,i._)("span",{class:"text-red-500"},"*",-1),B={class:"col-sm-9"},V=(0,i.Uk)("Informasi Yang Diharapkan"),j=(0,i._)("span",{class:"text-red-500"},"*",-1),T={class:"col-sm-9"},C=(0,i.Uk)("Rendal Pelaporan"),O=(0,i._)("span",{class:"text-red-500"},"*",-1),$={class:"col-sm-4"},A=(0,i.Uk)("HP "),q=(0,i._)("span",{class:"text-red-500"},"*",-1),E={class:"col-sm-2"},F=(0,i.Uk)("Dana "),L=(0,i._)("span",{class:"text-red-500"},"*",-1),I={class:"col-sm-4"},z=(0,i.Uk)("Sumber Dana "),M=(0,i._)("span",{class:"text-red-500"},"*",-1),N={class:"col-sm-4"},H=(0,i.Uk)("RMP"),J=(0,i._)("span",{class:"text-red-500"},"*",-1),Z={class:"col-sm-4"},G=(0,i.Uk)("RPL Triwulan "),Y=(0,i._)("span",{class:"text-red-500"},"*",-1),Q={class:"col-sm-4"},X={class:"col-sm-12"},tt={key:0},at=(0,i.Uk)(" Simpan PKPT "),et={key:1},it={key:2,class:"flex flex-col mt-4"},st={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},lt={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},ot={class:"shadow-sm overflow-hidden border-b border-gray-200 sm:rounded-lg"},nt={class:"min-w-full divide-y divide-gray-200"},dt=(0,i._)("thead",{class:"bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nama PKPT "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit Kerja "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Bidang Was "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," TW Pelaporan "),(0,i._)("th",{scope:"col",class:"relative px-6 py-3"},[(0,i._)("span",{class:"sr-only"},"Hapus")])])],-1),pt={class:"bg-white divide-y divide-gray-200"},rt={class:"px-6 py-4"},mt={class:"text-sm text-gray-900"},ut={class:"px-6 py-4 whitespace-nowrap"},ct={class:"text-sm text-gray-900"},ht={class:"px-6 py-4"},kt={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},wt={class:"text-sm text-gray-900"},bt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Pt=["onClick"],_t=(0,i.Uk)(" Batal "),gt=(0,i.Uk)(" Reset "),yt=(0,i._)("p",null,"Simpan",-1),Kt={key:0},Ut=(0,i.Uk)(" Ubah PKPT "),xt={key:1};function Dt(t,a,e,Dt,vt,Wt){const Rt=(0,i.up)("Loading"),St=(0,i.up)("CFormLabel"),Bt=(0,i.up)("CFormInput"),Vt=(0,i.up)("CRow"),jt=(0,i.up)("VueMultiselect"),Tt=(0,i.up)("CButton"),Ct=(0,i.up)("CFormTextarea"),Ot=(0,i.up)("CSpinner"),$t=(0,i.up)("CCol"),At=(0,i.up)("CForm"),qt=(0,i.up)("CCardBody"),Et=(0,i.up)("CCard");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(Rt,{active:vt.loading,"onUpdate:active":a[0]||(a[0]=t=>vt.loading=t),"is-full-page":!0},null,8,["active"]),(0,i.Wm)(Et,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(qt,{class:"p-4"},{default:(0,i.w5)((()=>["create"==e.mode?((0,i.wg)(),(0,i.iD)("h4",l,"Tambah PKPT")):"update"==e.mode?((0,i.wg)(),(0,i.iD)("h4",o,"Edit PKPT")):(0,i.kq)("",!0),"update"==e.mode?((0,i.wg)(),(0,i.j4)(Vt,{key:2,class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[n])),_:1}),(0,i._)("div",d,[(0,i.Wm)(Bt,{modelValue:vt.editData.idPkpt,"onUpdate:modelValue":a[1]||(a[1]=t=>vt.editData.idPkpt=t),readonly:""},null,8,["modelValue"])])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(At,null,{default:(0,i.w5)((()=>[(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"nama-kap",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[p,r])),_:1}),(0,i._)("div",m,["update"==e.mode?((0,i.wg)(),(0,i.iD)("div",u,[vt.selectedKap?((0,i.wg)(),(0,i.j4)(Bt,{key:0,type:"text",value:vt.selectedKap.namaKap,readonly:""},null,8,["value"])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",c,[Wt.isReadOnlyKap?((0,i.wg)(),(0,i.j4)(Bt,{key:0,type:"text",value:vt.selectedKap.namaKap,readonly:""},null,8,["value"])):((0,i.wg)(),(0,i.j4)(jt,{key:1,id:"nama-kap",placeholder:"Pilih KAP",label:"namaKap",modelValue:vt.selectedKap,"onUpdate:modelValue":a[2]||(a[2]=t=>vt.selectedKap=t),options:vt.optionsKap,"track-by":"namaKap",deselectLabel:"",selectLabel:""},null,8,["modelValue","options"]))]))])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"pj-kap",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[h,k])),_:1}),(0,i._)("div",f,[(0,i.Wm)(Bt,{type:"text",id:"pj-kap",modelValue:vt.pjKap,"onUpdate:modelValue":a[3]||(a[3]=t=>vt.pjKap=t),readonly:"",placeholder:"sesuai kap"},null,8,["modelValue"])])])),_:1}),"create"==e.mode?((0,i.wg)(),(0,i.j4)(Vt,{key:0,class:"mb-4 mt-4"},{default:(0,i.w5)((()=>[(0,i._)("div",w,[(0,i.Wm)(Tt,{type:"button",class:"px-4 py-2",color:"info",size:"sm",onClick:a[4]||(a[4]=t=>vt.isOpenForm=!vt.isOpenForm),variant:"outline"},{default:(0,i.w5)((()=>[b])),_:1})])])),_:1})):(0,i.kq)("",!0),vt.isOpenForm?((0,i.wg)(),(0,i.iD)("div",P,[(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[_,g])),_:1}),(0,i._)("div",y,[(0,i.Wm)(Bt,{type:"number",id:"tahun",modelValue:vt.form.tahun,"onUpdate:modelValue":a[5]||(a[5]=t=>vt.form.tahun=t),readonly:"",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"unit-kerja",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[K,U])),_:1}),(0,i._)("div",x,[(0,i.Wm)(jt,{id:"unit-kontributor",modelValue:vt.selectedUnitPkpt,"onUpdate:modelValue":a[6]||(a[6]=t=>vt.selectedUnitPkpt=t),options:vt.optionsUnitPkpt,placeholder:"Pilih Unit Kerja",label:"namaUnitKontributor","track-by":"namaUnitKontributor","custom-label":Wt.viewSelectUnitPkpt},null,8,["modelValue","options","custom-label"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"nama-pkpt",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[D,v])),_:1}),(0,i._)("div",W,[(0,i.Wm)(Ct,{id:"nama-pkpt",modelValue:vt.form.namaPkpt,"onUpdate:modelValue":a[7]||(a[7]=t=>vt.form.namaPkpt=t),rows:"3",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"bidwas",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[R,S])),_:1}),(0,i._)("div",B,[(0,i.Wm)(jt,{id:"bidwas",modelValue:vt.selectedBidwas,"onUpdate:modelValue":a[8]||(a[8]=t=>vt.selectedBidwas=t),options:vt.optionsBidwas,placeholder:"Pilih Bidwas",label:"namaBidwas","track-by":"namaBidwas"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"info-pkpt",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[V,j])),_:1}),(0,i._)("div",T,[(0,i.Wm)(Ct,{id:"info-pkpt",rows:"3",modelValue:vt.infoDiharapkanPkpt,"onUpdate:modelValue":a[9]||(a[9]=t=>vt.infoDiharapkanPkpt=t),readonly:"",required:""},null,8,["modelValue"])])])),_:1}),Wt.isUnitPkptPerwakilan||vt.isSektorAppd?((0,i.wg)(),(0,i.j4)(Vt,{key:0,class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"rendal-pelaporan",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[C,O])),_:1}),(0,i._)("div",$,[vt.isSektorAppd?((0,i.wg)(),(0,i.j4)(Bt,{key:0,value:"D302",readonly:""})):((0,i.wg)(),(0,i.j4)(jt,{key:1,id:"rendal-pelaporan",modelValue:vt.selectedRendPelaporan,"onUpdate:modelValue":a[10]||(a[10]=t=>vt.selectedRendPelaporan=t),options:vt.optionsRendPelaporan,placeholder:"Pilih Rendal Pelaporan",label:"namaUnitKontributor","track-by":"namaUnitKontributor","custom-label":Wt.viewSelectUnitPkpt},null,8,["modelValue","options","custom-label"]))])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"hp",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[A,q])),_:1}),(0,i._)("div",E,[(0,i.Wm)(Bt,{type:"number",modelValue:vt.form.hp,"onUpdate:modelValue":a[11]||(a[11]=t=>vt.form.hp=t),id:"hp",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"dana",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[F,L])),_:1}),(0,i._)("div",I,[(0,i.Wm)(Bt,{type:"number",modelValue:vt.form.dana,"onUpdate:modelValue":a[12]||(a[12]=t=>vt.form.dana=t),id:"dana",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"sumber-dana",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[z,M])),_:1}),(0,i._)("div",N,[(0,i.Wm)(jt,{id:"sumber-dana",modelValue:vt.selectedDana,"onUpdate:modelValue":a[13]||(a[13]=t=>vt.selectedDana=t),options:vt.optionsDana,placeholder:"Pilih Sumber",label:"deskripsi","track-by":"deskripsi"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"rmp",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[H,J])),_:1}),(0,i._)("div",Z,[(0,i.Wm)(jt,{id:"rmp",modelValue:vt.selectedRmp,"onUpdate:modelValue":a[14]||(a[14]=t=>vt.selectedRmp=t),options:vt.optionsRmp,placeholder:"Pilih RMP",label:"deskripsi","track-by":"deskripsi"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(Vt,{class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{for:"tw",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[G,Y])),_:1}),(0,i._)("div",Q,[(0,i.Wm)(jt,{id:"tw",modelValue:vt.form.triwulan,"onUpdate:modelValue":a[15]||(a[15]=t=>vt.form.triwulan=t),options:vt.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])])),_:1}),"create"==e.mode?((0,i.wg)(),(0,i.j4)(Vt,{key:1,class:"mb-4 mt-4 text-center"},{default:(0,i.w5)((()=>[(0,i._)("div",X,[(0,i.Wm)(Tt,{type:"button",class:"px-4 text-white",color:"success",size:"sm",onClick:Wt.submit},{default:(0,i.w5)((()=>[vt.loading?((0,i.wg)(),(0,i.iD)("div",tt,[(0,i.Wm)(Ot,{color:"white",size:"sm",class:"mr-2"}),at])):((0,i.wg)(),(0,i.iD)("span",et,"Simpan PKPT"))])),_:1},8,["onClick"])])])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),"update"!=e.mode?((0,i.wg)(),(0,i.iD)("div",it,[(0,i._)("div",st,[(0,i._)("div",lt,[(0,i._)("div",ot,[(0,i._)("table",nt,[dt,(0,i._)("tbody",pt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(vt.pkpts,((t,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:t.nama},[(0,i._)("td",rt,[(0,i._)("div",mt,(0,s.zw)(t.nama_pkpt),1)]),(0,i._)("td",ut,[(0,i._)("div",ct,(0,s.zw)(t.nama_kontributor_pkpt),1)]),(0,i._)("td",ht,[(0,i._)("div",kt,(0,s.zw)(t.nama_bidwas),1)]),(0,i._)("td",ft,[(0,i._)("div",wt,(0,s.zw)(t.triwulan),1)]),(0,i._)("td",bt,[(0,i._)("button",{class:"text-red-600 hover:text-red-900",onClick:e=>Wt.deletePkpt(a,t.id)}," Hapus ",8,Pt)])])))),128))])])])])])])):(0,i.kq)("",!0),(0,i.Wm)(Vt,{class:"mt-8 view-form"},{default:(0,i.w5)((()=>[(0,i.Wm)($t,{sm:"12",lg:"6",class:"mb-3"},{default:(0,i.w5)((()=>["view"!=e.mode?((0,i.wg)(),(0,i.j4)(Tt,{key:0,variant:"outline",color:"dark",onClick:a[16]||(a[16]=a=>t.$router.push("/pkpt")),class:"px-5"},{default:(0,i.w5)((()=>[_t])),_:1})):(0,i.kq)("",!0)])),_:1}),"create"==e.mode||"update"==e.mode?((0,i.wg)(),(0,i.j4)($t,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(Tt,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:Wt.reset},{default:(0,i.w5)((()=>[gt])),_:1},8,["onClick"]),"create"==e.mode?((0,i.wg)(),(0,i.j4)(Tt,{key:0,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:Wt.submitToBack},{default:(0,i.w5)((()=>[yt])),_:1},8,["onClick"])):((0,i.wg)(),(0,i.j4)(Tt,{key:1,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:Wt.submit},{default:(0,i.w5)((()=>[vt.loading?((0,i.wg)(),(0,i.iD)("div",Kt,[(0,i.Wm)(Ot,{color:"white",size:"sm",class:"mr-2"}),Ut])):((0,i.wg)(),(0,i.iD)("p",xt,"Ubah PKPT"))])),_:1},8,["onClick"]))])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})],64)}var vt=e(6265),Wt=e.n(vt),Rt=e(6368),St=e(6216);const Bt=[{id:52,deskripsi:"APBN"},{id:53,deskripsi:"Mitra"},{id:1518,deskripsi:"ABT"}],Vt=[{id:60,deskripsi:"Belum Ditentukan"},{id:1,deskripsi:"Januari"},{id:2,deskripsi:"Februari"},{id:3,deskripsi:"Maret"},{id:4,deskripsi:"April"},{id:5,deskripsi:"Mei"},{id:6,deskripsi:"Juni"},{id:7,deskripsi:"Juli"},{id:8,deskripsi:"Agustus"},{id:9,deskripsi:"September"},{id:10,deskripsi:"Oktober"},{id:11,deskripsi:"November"},{id:12,deskripsi:"Desember"}];var jt={components:{VueMultiselect:Rt.ZP,Loading:St.Z},props:["mode","idPkpt"],data(){return{isSektorAppd:!1,idKap:null,pjKap:null,form:this.getEmptyForm(),submitted:!1,loading:!1,isOpenForm:!0,editData:{},selectedKap:null,optionsKap:[],selectedKontributor:null,optionsKontributor:[],selectedBidwas:null,optionsBidwas:[],selectedDana:null,optionsDana:Bt,selectedRmp:null,optionsRmp:Vt,selectedUnitPkpt:null,optionsUnitPkpt:[],selectedRendPelaporan:null,optionsRendPelaporan:[],optionsTriwulan:[1,2,3,4],infoDiharapkanPkpt:null,pkpts:[]}},watch:{selectedKap:function(t){t&&(t.topiks.some((t=>28==t.idSektor))?(this.isSektorAppd=!0,this.form.idRendPelaporan=339):(this.isSektorAppd=!1,this.form.idRendPelaporan=0),this.idKap=t.idKap,this.pjKap=t.pjKap,this.getOptionsUnitPkpt())},selectedUnitPkpt:function(t){t&&(this.form.idTopikOrKontributor=t.idKontributor,this.form.idUnitKerja=t.idUnitKontributor,this.form.namaUnitKerja=t.namaUnitKontributor,this.form.peranPkpt=t.peranPkpt,this.infoDiharapkanPkpt=t.infoKontributor,this.selectedBidwas=null,this.optionsBidwas=[],this.loadBidwas(this.form.idUnitKerja),t.namaUnitKontributor.includes("PW")&&this.getOptionsRendPelaporan())},selectedRendPelaporan:function(t){t&&(this.form.idRendPelaporan=t.idUnitKontributor)},selectedBidwas:function(t){t&&(this.form.idBidwas=t.id,this.form.namaBidwasPkpt=t.namaBidwas)},selectedDana:function(t){t&&(this.form.idSumberDana=t.id,this.form.namaSumberDana=t.deskripsi)},selectedRmp:function(t){t&&(this.form.idRmp=t.id,this.form.namaRmp=t.deskripsi)}},computed:{isReadOnlyKap:function(){return this.pkpts.length>0},isUnitPkptPerwakilan:function(){return!!this.selectedUnitPkpt&&!!this.selectedUnitPkpt.namaUnitKontributor.includes("PW")}},async mounted(){this.form.tahun=localStorage.tahun,this.optionsKap=await this.$store.dispatch("loadListKap"),"update"==this.mode&&(this.loading=!0,await this.loadPkptById(),this.selectedKap=this.optionsKap.filter((t=>t.idKap==this.idKap))[0],await this.getOptionsUnitPkpt(),this.selectedUnitPkpt=this.optionsUnitPkpt.filter((t=>t.idUnitKontributor==this.form.idUnitKerja))[0],this.selectedUnitPkpt.namaUnitKontributor.includes("PW")&&(await this.getOptionsRendPelaporan(),this.selectedRendPelaporan=this.optionsRendPelaporan.filter((t=>t.idUnitKontributor==this.form.idRendPelaporan))[0]),await this.loadBidwas(this.form.idUnitKerja),this.selectedBidwas=this.optionsBidwas.filter((t=>t.id==this.form.idBidwas))[0],this.selectedDana=this.optionsDana.filter((t=>t.id==this.form.idSumberDana))[0],this.selectedRmp=this.optionsRmp.filter((t=>t.id==this.form.idRmp))[0])},methods:{async getOptionsUnitPkpt(){let t=await this.$store.dispatch("loadSelectUnitPkpt",{idKap:this.idKap});const a=[];t.forEach((t=>{a.push(...t.kontributors)})),this.optionsUnitPkpt=a},async getOptionsRendPelaporan(){let t=await this.$store.dispatch("loadSelectUnitPkpt",{idKap:this.idKap});const a=[];t.forEach((t=>{a.push(...t.kontributors)})),this.optionsRendPelaporan=a.filter((t=>!t.namaUnitKontributor.includes("PW")))},async loadBidwas(t){this.optionsBidwas=await this.$store.dispatch("loadBidwas",{idUnit:t})},viewSelectSearch({alias:t,deskripsi:a}){return`${t} - ${a}`},viewSelectUnitPkpt({namaUnitKontributor:t,peranPkpt:a}){return`${t} - ${1==a?"Koordinator Topik":"Kontributor Topik"}`},async deletePkpt(t,a){try{const e=await Wt()({method:"DELETE",baseURL:this.$apiAddress,url:`/api/pkpt/${a}`,params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});200==e.status&&(this.toastSuccess("Berhasil menghapus data"),this.pkpts.splice(t))}catch(e){this.toastError(e.message)}},submitToBack(){this.pkpts.length>0?setTimeout((()=>{this.$router.push("/pkpt"),this.toastSuccess("Berhasil membuat PKPT")}),500):this.toastWarning("Selesaikan dahulu pembuatan PKPT")},async submit(){const t=this.$func.isNullOfObjElement(this.form);if(t){this.submitted=!0;const t=this.appendToFormData();try{if("create"==this.mode){this.loading=!0;const a=await Wt()({method:"POST",baseURL:this.$apiAddress,url:"/api/pkpt",data:t,params:{token:localStorage.getItem("token")}});200!=a.status?this.error="Gagal menyimpan data":(this.loading=!1,this.toastSuccess("Berhasil menyimpan data"));const e=await a.data;this.pkpts.push(e),this.reset(),this.form.tahun=localStorage.tahun}else if("update"==this.mode){this.loading=!0;const a=await Wt()({method:"POST",baseURL:this.$apiAddress,url:`/api/pkpt/${this.idPkpt}`,data:t,params:{token:localStorage.getItem("token")}});200!=a.status?this.error="Gagal merubah data":(this.loading=!1,this.$router.push("/pkpt"),this.toastSuccess("Berhasil merubah data"))}}catch(a){setTimeout((()=>{this.loading=!1,this.toastError("Terjadi kesalahan saat submit data")}),500)}}else this.toastWarning("Lengkapi data sebelum submit!")},reset(){this.form=this.getEmptyForm(),this.submitted=!1,this.selectedUnitPkpt=null,this.infoDiharapkanPkpt=null,this.isReadOnlyKap||(this.pjKap=null,this.selectedKap=null),this.selectedKontributor=null,this.selectedBidwas=null,this.selectedDana=null,this.selectedRmp=null},getEmptyForm(){return{tahun:null,idTopikOrKontributor:null,peranPkpt:null,idUnitKerja:null,namaPkpt:null,idBidwas:null,idRendPelaporan:0,hp:null,dana:null,idSumberDana:null,idRmp:null,namaRmp:null,triwulan:[],namaBidwasPkpt:null,namaUnitKerja:null,namaSumberDana:null}},appendToFormData(){const t=new FormData;return"update"==this.mode?t.append("_method","PUT"):(t.append("idKap",this.idKap),t.append("tahunPkpt",this.form.tahun)),t.append("idRendalPelaporan",this.form.idRendPelaporan),t.append("idUnitKerja",this.form.idUnitKerja),t.append("namaUnitKerja",this.form.namaUnitKerja),t.append("namaPkpt",this.form.namaPkpt),t.append("idBidwas",this.form.idBidwas),t.append("namaBidwasPkpt",this.form.namaBidwasPkpt),t.append("triwulan",this.form.triwulan),t.append("hp",this.form.hp),t.append("dana",this.form.dana),t.append("idSumberDana",this.form.idSumberDana),t.append("namaSumberDana",this.form.namaSumberDana),t.append("idRmp",this.form.idRmp),t.append("namaRmp",this.form.namaRmp),t.append("peranPkpt",this.form.peranPkpt),t.append("idTopikOrKontributor",this.form.idTopikOrKontributor),t.append("nip",localStorage.getItem("nip")),t},async loadPkptById(){try{const t=await Wt()({method:"GET",baseURL:this.$apiAddress,url:`/api/pkpt/${this.idPkpt}`,params:{token:localStorage.getItem("token")}});this.editData=await t.data,200==t.status&&(this.idKap=this.editData.idKap,this.form={tahun:this.editData.tahunPkpt,idTopikOrKontributor:0==this.editData.peranPkpt?this.editData.idKontributor:this.editData.idTopik,peranPkpt:this.editData.peranPkpt,idUnitKerja:this.editData.idUnitKerja,namaPkpt:this.editData.namaPkpt,idBidwas:this.editData.idBidwas,hp:this.editData.hp,dana:this.editData.dana,idSumberDana:this.editData.idSumberDana,idRmp:this.editData.idRmp,triwulan:this.editData.triwulan,idRendPelaporan:this.editData.idRendalPelaporan}),this.loading=!1}catch(t){this.toastError(t.message),this.loading=!1}},toastSuccess(t){this.$toast.open({message:t,type:"success",position:"top-right",duration:3e3})},toastError(t){this.$toast.open({message:t,type:"error",position:"top-right",duration:3e3})},toastWarning(t){this.$toast.open({message:t,type:"warning",position:"top-right",duration:3e3})}}},Tt=e(89);const Ct=(0,Tt.Z)(jt,[["render",Dt]]);var Ot=Ct}}]);
//# sourceMappingURL=148.3ec3d392.js.map