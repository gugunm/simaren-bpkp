"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[472],{5472:function(a,e,t){t.d(e,{Z:function(){return Xa}});var i=t(3396),s=t(9242),l=t(7139);const o={key:0,class:"h4 mb-4"},n={key:1,class:"h4 mb-4"},d=(0,i.Uk)("ID "),p={class:"col-sm-2"},r=(0,i.Uk)("Nama KAP "),m=(0,i._)("span",{class:"text-red-500"},"*",-1),u={class:"col-sm-9"},c={key:0},h={key:1},k=(0,i.Uk)("Unit Kerja PJ KAP "),f=(0,i._)("span",{class:"text-red-500"},"*",-1),w={class:"col-sm-2"},b={class:"col-sm-2"},g=(0,i.Uk)(" + PKPT "),P={key:1},_=(0,i.Uk)("Tahun "),K=(0,i._)("span",{class:"text-red-500"},"*",-1),y={class:"col-sm-2"},U=(0,i.Uk)("Informasi Yang Diharapkan"),D=(0,i._)("span",{class:"text-red-500"},"*",-1),R={class:"col-sm-9"},x=(0,i.Uk)("Unit Kerja"),j=(0,i._)("span",{class:"text-red-500"},"*",-1),W={class:"col-sm-4"},v=(0,i.Uk)("Nama PKPT"),S=(0,i._)("span",{class:"text-red-500"},"*",-1),V={class:"col-sm-9"},I=(0,i.Uk)("BIDWAS"),B=(0,i._)("span",{class:"text-red-500"},"*",-1),L={class:"col-sm-9"},T=(0,i.Uk)("Informasi Yang Diharapkan level Bidwas"),$=(0,i._)("span",{class:"text-red-500"},"*",-1),C={class:"col-sm-9"},O=(0,i.Uk)("Rendal Pelaporan"),E=(0,i._)("span",{class:"text-red-500"},"*",-1),J={class:"col-sm-4"},A=(0,i.Uk)("HP "),q=(0,i._)("span",{class:"text-red-500"},"*",-1),N={class:"col-sm-3"},F=(0,i.Uk)("Jenis Kegiatan "),z=(0,i._)("span",{class:"text-red-500"},"*",-1),H={class:"col-sm-4"},M=(0,i.Uk)("Sumber Dana "),Y=(0,i._)("span",{class:"text-red-500"},"*",-1),Z=["id","value","onChange"],G=["for"],Q=(0,i.Uk)("Total Dana "),X=(0,i._)("span",{class:"text-red-500"},"*",-1),aa={class:"col-sm-4"},ea=(0,i.Uk)("RMP"),ta=(0,i._)("span",{class:"text-red-500"},"*",-1),ia={class:"col-sm-4"},sa=(0,i.Uk)("RPL Triwulan "),la=(0,i._)("span",{class:"text-red-500"},"*",-1),oa={class:"col-sm-4"},na=(0,i.Uk)("Pilih IKK "),da=(0,i._)("span",{class:"text-red-500"},"*",-1),pa={class:"col-sm-8"},ra=(0,i.Uk)("Pilih RO "),ma=(0,i._)("span",{class:"text-red-500"},"*",-1),ua={class:"col-sm-8"},ca=(0,i.Uk)("Jumlah Lokus "),ha=(0,i._)("span",{class:"text-red-500"},"*",-1),ka={class:"col-sm-4"},fa={class:"col-sm-4"},wa={class:"col-sm-12"},ba={key:0},ga=(0,i.Uk)(" Simpan PKPT "),Pa={key:1},_a={key:2,class:"flex flex-col mt-4"},Ka={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},ya={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},Ua={class:"shadow-sm overflow-hidden border-b border-gray-200 sm:rounded-lg"},Da={class:"min-w-full divide-y divide-gray-200"},Ra=(0,i._)("thead",{class:"bg-gray-50"},[(0,i._)("tr",null,[(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nama PKPT "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unit Kerja "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Bidang Was "),(0,i._)("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," TW Pelaporan "),(0,i._)("th",{scope:"col",class:"relative px-6 py-3"},[(0,i._)("span",{class:"sr-only"},"Hapus")])])],-1),xa={class:"bg-white divide-y divide-gray-200"},ja={class:"px-6 py-4"},Wa={class:"text-sm text-gray-900"},va={class:"px-6 py-4 whitespace-nowrap"},Sa={class:"text-sm text-gray-900"},Va={class:"px-6 py-4"},Ia={class:"text-sm text-gray-900"},Ba={class:"px-6 py-4 whitespace-nowrap"},La={class:"text-sm text-gray-900"},Ta={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},$a=["onClick"],Ca=(0,i.Uk)(" Batal "),Oa=(0,i.Uk)(" Reset "),Ea=(0,i._)("p",null,"Simpan",-1),Ja={key:0},Aa=(0,i.Uk)(" Ubah PKPT "),qa={key:1};function Na(a,e,t,Na,Fa,za){const Ha=(0,i.up)("Loading"),Ma=(0,i.up)("CFormLabel"),Ya=(0,i.up)("CFormInput"),Za=(0,i.up)("CRow"),Ga=(0,i.up)("VueMultiselect"),Qa=(0,i.up)("CButton"),Xa=(0,i.up)("CFormTextarea"),ae=(0,i.up)("CCol"),ee=(0,i.up)("CSpinner"),te=(0,i.up)("CForm"),ie=(0,i.up)("CCardBody"),se=(0,i.up)("CCard");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(Ha,{active:Fa.loading,"onUpdate:active":e[0]||(e[0]=a=>Fa.loading=a),"is-full-page":!0},null,8,["active"]),(0,i.Wm)(se,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(ie,{class:"p-4"},{default:(0,i.w5)((()=>["create"==t.mode?((0,i.wg)(),(0,i.iD)("h4",o,"Tambah PKPT")):"update"==t.mode?((0,i.wg)(),(0,i.iD)("h4",n,"Edit PKPT")):(0,i.kq)("",!0),"update"==t.mode?((0,i.wg)(),(0,i.j4)(Za,{key:2,class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[d])),_:1}),(0,i._)("div",p,[(0,i.Wm)(Ya,{modelValue:Fa.editData.idPkpt,"onUpdate:modelValue":e[1]||(e[1]=a=>Fa.editData.idPkpt=a),readonly:""},null,8,["modelValue"])])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(te,null,{default:(0,i.w5)((()=>[(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"nama-kap",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[r,m])),_:1}),(0,i._)("div",u,["update"==t.mode?((0,i.wg)(),(0,i.iD)("div",c,[Fa.selectedKap?((0,i.wg)(),(0,i.j4)(Ya,{key:0,type:"text",value:Fa.selectedKap.namaKap,readonly:""},null,8,["value"])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",h,[za.isReadOnlyKap?((0,i.wg)(),(0,i.j4)(Ya,{key:0,type:"text",value:Fa.selectedKap.namaKap,readonly:""},null,8,["value"])):((0,i.wg)(),(0,i.j4)(Ga,{key:1,id:"nama-kap",placeholder:"Pilih KAP",label:"namaKap",modelValue:Fa.selectedKap,"onUpdate:modelValue":e[2]||(e[2]=a=>Fa.selectedKap=a),options:Fa.optionsKap,"track-by":"namaKap",deselectLabel:"",selectLabel:""},null,8,["modelValue","options"]))]))])])),_:1}),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"pj-kap",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[k,f])),_:1}),(0,i._)("div",w,[(0,i.Wm)(Ya,{type:"text",id:"pj-kap",modelValue:Fa.pjKap,"onUpdate:modelValue":e[3]||(e[3]=a=>Fa.pjKap=a),readonly:"",placeholder:"sesuai kap"},null,8,["modelValue"])])])),_:1}),"create"==t.mode?((0,i.wg)(),(0,i.j4)(Za,{key:0,class:"mb-4 mt-4"},{default:(0,i.w5)((()=>[(0,i._)("div",b,[(0,i.Wm)(Qa,{type:"button",class:"px-4 py-2",color:"info",size:"sm",onClick:e[4]||(e[4]=a=>Fa.isOpenForm=!Fa.isOpenForm),variant:"outline"},{default:(0,i.w5)((()=>[g])),_:1})])])),_:1})):(0,i.kq)("",!0),Fa.isOpenForm?((0,i.wg)(),(0,i.iD)("div",P,[(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[_,K])),_:1}),(0,i._)("div",y,[(0,i.Wm)(Ya,{type:"number",id:"tahun",modelValue:Fa.form.tahun,"onUpdate:modelValue":e[5]||(e[5]=a=>Fa.form.tahun=a),readonly:"",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"info-pkpt",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[U,D])),_:1}),(0,i._)("div",R,[(0,i.Wm)(Xa,{id:"info-pkpt",rows:"3",modelValue:Fa.infoDiharapkanPkpt,"onUpdate:modelValue":e[6]||(e[6]=a=>Fa.infoDiharapkanPkpt=a),readonly:"",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"unit-kerja",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[x,j])),_:1}),(0,i._)("div",W,[(0,i.Wm)(Ga,{id:"unit-kontributor",modelValue:Fa.selectedUnitPkpt,"onUpdate:modelValue":e[7]||(e[7]=a=>Fa.selectedUnitPkpt=a),options:Fa.optionsUnitPkpt,placeholder:"Pilih Unit Kerja",label:"namaUnitKontributor","track-by":"namaUnitKontributor","custom-label":za.viewSelectUnitPkpt,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"nama-pkpt",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[v,S])),_:1}),(0,i._)("div",V,[(0,i.Wm)(Xa,{id:"nama-pkpt",modelValue:Fa.form.namaPkpt,"onUpdate:modelValue":e[8]||(e[8]=a=>Fa.form.namaPkpt=a),rows:"3",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"bidwas",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[I,B])),_:1}),(0,i._)("div",L,[(0,i.Wm)(Ga,{id:"bidwas",modelValue:Fa.selectedBidwas,"onUpdate:modelValue":e[9]||(e[9]=a=>Fa.selectedBidwas=a),options:Fa.optionsBidwas,placeholder:"Pilih Bidwas",label:"namaBidwas","track-by":"namaBidwas",selectLabel:"",deselectLabel:""},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"info-pkpt-bidwas",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[T,$])),_:1}),(0,i._)("div",C,[(0,i.Wm)(Xa,{id:"info-pkpt-bidwas",rows:"3",modelValue:Fa.form.infoBidwas,"onUpdate:modelValue":e[10]||(e[10]=a=>Fa.form.infoBidwas=a),required:""},null,8,["modelValue"])])])),_:1}),za.isUnitPkptPerwakilan||Fa.isSektorAppd?((0,i.wg)(),(0,i.j4)(Za,{key:0,class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"rendal-pelaporan",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[O,E])),_:1}),(0,i._)("div",J,[Fa.isSektorAppd?((0,i.wg)(),(0,i.j4)(Ya,{key:0,value:"D302",readonly:""})):((0,i.wg)(),(0,i.j4)(Ga,{key:1,id:"rendal-pelaporan",modelValue:Fa.selectedRendPelaporan,"onUpdate:modelValue":e[11]||(e[11]=a=>Fa.selectedRendPelaporan=a),options:Fa.optionsRendPelaporan,placeholder:"Pilih Rendal Pelaporan",label:"namaUnitKontributor","track-by":"namaUnitKontributor","custom-label":za.viewSelectUnitPkpt,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"]))])])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"hp",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[A,q])),_:1}),(0,i._)("div",N,[(0,i.Wm)(Ya,{type:"number",modelValue:Fa.form.hp,"onUpdate:modelValue":e[12]||(e[12]=a=>Fa.form.hp=a),id:"hp",required:""},null,8,["modelValue"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"jenis-kegiatan",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[F,z])),_:1}),(0,i._)("div",H,[(0,i.Wm)(Ga,{id:"jenis-kegiatan",modelValue:Fa.selectedJenisKegiatan,"onUpdate:modelValue":e[13]||(e[13]=a=>Fa.selectedJenisKegiatan=a),options:Fa.optionsJenisKegiatan,placeholder:"Pilih Jenis Kegiatan",label:"jenisKegiatanName","track-by":"jenisKegiatanName",selectLabel:"",deselectLabel:""},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{sm:"3"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"sumber-dana",class:"col-form-label"},{default:(0,i.w5)((()=>[M,Y])),_:1})])),_:1}),(0,i.Wm)(ae,{sm:"9"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Fa.optionsDana,(a=>((0,i.wg)(),(0,i.j4)(Za,{key:a.deskripsi,class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{sm:"3"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("input",{class:"mr-3",type:"checkbox",id:a.deskripsi,value:`${a.deskripsi}#${a.id}`,"onUpdate:modelValue":e[14]||(e[14]=a=>Fa.choosenDana=a),onChange:e=>za.changeCheckedDana(a)},null,40,Z),[[s.e8,Fa.choosenDana]]),(0,i._)("label",{for:a.deskripsi},(0,l.zw)(a.deskripsi),9,G)])),_:2},1024),(0,i.Wm)(ae,{sm:"5"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ya,{type:"number",modelValue:a.nilai,"onUpdate:modelValue":e=>a.nilai=e,readonly:!a.status},null,8,["modelValue","onUpdate:modelValue","readonly"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,i._)("p",null,(0,l.zw)(Fa.choosenDana.join(",")),1),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"dana",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[Q,X])),_:1}),(0,i._)("div",aa,[(0,i.Wm)(Ya,{value:a.$func.thousandSeprator(za.totalDana),id:"dana",readonly:""},null,8,["value"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"rmp",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[ea,ta])),_:1}),(0,i._)("div",ia,[(0,i.Wm)(Ga,{id:"rmp",modelValue:Fa.selectedRmp,"onUpdate:modelValue":e[15]||(e[15]=a=>Fa.selectedRmp=a),options:Fa.optionsRmp,placeholder:"Pilih RMP",label:"deskripsi","track-by":"deskripsi"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"tw",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[sa,la])),_:1}),(0,i._)("div",oa,[(0,i.Wm)(Ga,{id:"tw",modelValue:Fa.form.triwulan,"onUpdate:modelValue":e[16]||(e[16]=a=>Fa.form.triwulan=a),options:Fa.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"pilih-ikk",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[na,da])),_:1}),(0,i._)("div",pa,[(0,i.Wm)(Ga,{id:"pilih-ikk",modelValue:Fa.selectedIkk,"onUpdate:modelValue":e[17]||(e[17]=a=>Fa.selectedIkk=a),options:Fa.optionsIkk,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih IKK",label:"uraianIkk","track-by":"uraianIkk","custom-label":za.viewSelectIkk,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"pilih-ro",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[ra,ma])),_:1}),(0,i._)("div",ua,[(0,i.Wm)(Ga,{id:"pilih-ro",modelValue:Fa.selectedRo,"onUpdate:modelValue":e[18]||(e[18]=a=>Fa.selectedRo=a),options:Fa.optionsRo,placeholder:"Pilih RO",label:"uraianRo","track-by":"uraianRo","custom-label":za.viewSelectRo,selectLabel:"",deselectLabel:""},null,8,["modelValue","options","custom-label"])])])),_:1}),(0,i.Wm)(Za,{class:"mb-4"},{default:(0,i.w5)((()=>[(0,i.Wm)(Ma,{for:"jumlah-lokus",class:"col-sm-3 col-form-label"},{default:(0,i.w5)((()=>[ca,ha])),_:1}),(0,i._)("div",ka,[(0,i.Wm)(Ya,{type:"number",id:"jumlah-lokus",modelValue:Fa.form.jumlahLokus,"onUpdate:modelValue":e[19]||(e[19]=a=>Fa.form.jumlahLokus=a),placeholder:"Jumlah Lokus",required:""},null,8,["modelValue"])]),(0,i._)("div",fa,[(0,i.Wm)(Ya,{type:"text",id:"satuan-lokus",modelValue:Fa.form.satuanLokus,"onUpdate:modelValue":e[20]||(e[20]=a=>Fa.form.satuanLokus=a),placeholder:"Satuan Lokus",required:""},null,8,["modelValue"])])])),_:1}),"create"==t.mode?((0,i.wg)(),(0,i.j4)(Za,{key:1,class:"mb-4 mt-4 text-center"},{default:(0,i.w5)((()=>[(0,i._)("div",wa,[(0,i.Wm)(Qa,{type:"button",class:"px-4 text-white",color:"success",size:"sm",onClick:za.submit},{default:(0,i.w5)((()=>[Fa.loading?((0,i.wg)(),(0,i.iD)("div",ba,[(0,i.Wm)(ee,{color:"white",size:"sm",class:"mr-2"}),ga])):((0,i.wg)(),(0,i.iD)("span",Pa,"Simpan PKPT"))])),_:1},8,["onClick"])])])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),"update"!=t.mode?((0,i.wg)(),(0,i.iD)("div",_a,[(0,i._)("div",Ka,[(0,i._)("div",ya,[(0,i._)("div",Ua,[(0,i._)("table",Da,[Ra,(0,i._)("tbody",xa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Fa.pkpts,((a,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:a.nama},[(0,i._)("td",ja,[(0,i._)("div",Wa,(0,l.zw)(a.nama_pkpt),1)]),(0,i._)("td",va,[(0,i._)("div",Sa,(0,l.zw)(a.nama_kontributor_pkpt),1)]),(0,i._)("td",Va,[(0,i._)("div",Ia,(0,l.zw)(a.nama_bidwas),1)]),(0,i._)("td",Ba,[(0,i._)("div",La,(0,l.zw)(a.triwulan),1)]),(0,i._)("td",Ta,[(0,i._)("button",{class:"text-red-600 hover:text-red-900",onClick:t=>za.deletePkpt(e,a.id)}," Hapus ",8,$a)])])))),128))])])])])])])):(0,i.kq)("",!0),(0,i.Wm)(Za,{class:"mt-8 view-form"},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{sm:"12",lg:"6",class:"mb-3"},{default:(0,i.w5)((()=>["view"!=t.mode?((0,i.wg)(),(0,i.j4)(Qa,{key:0,variant:"outline",color:"dark",onClick:e[21]||(e[21]=e=>a.$router.push("/pkpt")),class:"px-5"},{default:(0,i.w5)((()=>[Ca])),_:1})):(0,i.kq)("",!0)])),_:1}),"create"==t.mode||"update"==t.mode?((0,i.wg)(),(0,i.j4)(ae,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,i.w5)((()=>[(0,i.Wm)(Qa,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:za.reset},{default:(0,i.w5)((()=>[Oa])),_:1},8,["onClick"]),"create"==t.mode?((0,i.wg)(),(0,i.j4)(Qa,{key:0,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:za.submitToBack},{default:(0,i.w5)((()=>[Ea])),_:1},8,["onClick"])):((0,i.wg)(),(0,i.j4)(Qa,{key:1,type:"button",color:"info",class:"px-5 ml-2 text-white",onClick:za.submit},{default:(0,i.w5)((()=>[Fa.loading?((0,i.wg)(),(0,i.iD)("div",Ja,[(0,i.Wm)(ee,{color:"white",size:"sm",class:"mr-2"}),Aa])):((0,i.wg)(),(0,i.iD)("p",qa,"Ubah PKPT"))])),_:1},8,["onClick"]))])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})],64)}var Fa=t(6265),za=t.n(Fa),Ha=t(6368),Ma=t(6216);const Ya=[{id:60,deskripsi:"Belum Ditentukan"},{id:1,deskripsi:"Januari"},{id:2,deskripsi:"Februari"},{id:3,deskripsi:"Maret"},{id:4,deskripsi:"April"},{id:5,deskripsi:"Mei"},{id:6,deskripsi:"Juni"},{id:7,deskripsi:"Juli"},{id:8,deskripsi:"Agustus"},{id:9,deskripsi:"September"},{id:10,deskripsi:"Oktober"},{id:11,deskripsi:"November"},{id:12,deskripsi:"Desember"}];var Za={components:{VueMultiselect:Ha.ZP,Loading:Ma.Z},props:["mode","idPkpt"],data(){return{isSektorAppd:!1,idKap:null,pjKap:null,form:this.getEmptyForm(),submitted:!1,loading:!1,isOpenForm:!0,editData:{},selectedKap:null,optionsKap:[],selectedKontributor:null,optionsKontributor:[],selectedBidwas:null,optionsBidwas:[],optionsJenisKegiatan:[],selectedJenisKegiatan:null,optionsIkk:[],selectedIkk:null,optionsRo:[],selectedRo:null,refOptionsDana:[],optionsDana:[],choosenDana:[],selectedRmp:null,optionsRmp:Ya,selectedUnitPkpt:null,optionsUnitPkpt:[],selectedRendPelaporan:null,optionsRendPelaporan:[],optionsTriwulan:[1,2,3,4],infoDiharapkanPkpt:null,pkpts:[]}},watch:{selectedKap:function(a){a&&(a.topiks.some((a=>28==a.idSektor))?(this.isSektorAppd=!0,this.form.idRendPelaporan=339):(this.isSektorAppd=!1,"create"==this.mode&&(this.form.idRendPelaporan=0)),this.idKap=a.idKap,this.pjKap=a.pjKap,this.getOptionsUnitPkpt())},selectedUnitPkpt:function(a){a&&(this.form.idTopikOrKontributor=a.idKontributor,this.form.idUnitKerja=a.idUnitKontributor,this.form.namaUnitKerja=a.namaUnitKontributor,this.form.peranPkpt=a.peranPkpt,this.infoDiharapkanPkpt=a.infoKontributor,this.selectedBidwas=null,this.optionsBidwas=[],this.loadBidwas(this.form.idUnitKerja),this.loadListRo(this.form.idUnitKerja),a.namaUnitKontributor.includes("PW")&&this.getOptionsRendPelaporan())},selectedRendPelaporan:function(a){a&&(this.form.idRendPelaporan=a.idUnitKontributor)},selectedBidwas:function(a){a&&(this.form.idBidwas=a.id,this.form.namaBidwasPkpt=a.namaBidwas)},selectedJenisKegiatan:function(a){a&&(this.form.jenisKegiatanId=a.jenisKegiatanId,this.form.jenisKegiatanName=a.jenisKegiatanName)},selectedIkk:function(a){console.log("SELECTED IKK"),console.log(a),a&&(this.form.kodeIkk=a.map((a=>a.kodeIkk)))},selectedRo:function(a){a&&(this.form.kodeRo=a.kodeRo,this.form.uraianRo=a.uraianRo)},selectedRmp:function(a){a&&(this.form.idRmp=a.id,this.form.namaRmp=a.deskripsi)}},computed:{isReadOnlyKap:function(){return this.pkpts.length>0},isUnitPkptPerwakilan:function(){return!!this.selectedUnitPkpt&&!!this.selectedUnitPkpt.namaUnitKontributor.includes("PW")},totalDana(){return this.optionsDana.length>0?this.optionsDana.reduce(((a,{nilai:e})=>a+Number(e)),0):0}},async mounted(){this.form.tahun=localStorage.tahun,this.optionsKap=await this.$store.dispatch("loadListKap"),this.optionsJenisKegiatan=await this.$store.dispatch("loadListJenisKegiatan"),this.optionsIkk=await this.$store.dispatch("loadListIkk");const a=await this.$store.dispatch("loadListSumberDana");this.refOptionsDana=a.map((a=>({id:a.idSumberDana,deskripsi:a.namaSumberDana,nilai:0,status:52==a.idSumberDana&&"create"==this.mode}))),this.optionsDana=this.refOptionsDana.map((a=>({...a}))),"create"==this.mode?this.choosenDana.push("APBN#52"):"update"==this.mode&&(this.loading=!0,await this.loadPkptById(),this.selectedKap=this.optionsKap.filter((a=>a.idKap==this.idKap))[0],await this.getOptionsUnitPkpt(),this.selectedUnitPkpt=this.optionsUnitPkpt.filter((a=>a.idUnitKontributor==this.form.idUnitKerja))[0],this.selectedUnitPkpt.namaUnitKontributor.includes("PW")&&(await this.getOptionsRendPelaporan(),this.selectedRendPelaporan=this.optionsRendPelaporan.filter((a=>a.idUnitKontributor==this.form.idRendPelaporan))[0]),await this.loadBidwas(this.form.idUnitKerja),this.selectedBidwas=this.optionsBidwas.filter((a=>a.id==this.form.idBidwas))[0],this.selectedJenisKegiatan=this.optionsJenisKegiatan.filter((a=>a.jenisKegiatanId==this.form.jenisKegiatanId))[0],this.selectedIkk=this.optionsIkk.filter((a=>this.form.kodeIkk.includes(a.kodeIkk))),await this.loadListRo(this.form.idUnitKerja),this.selectedRo=this.optionsRo.filter((a=>a.kodeRo==this.form.kodeRo))[0],this.selectedRmp=this.optionsRmp.filter((a=>a.id==this.form.idRmp))[0],this.optionsDana=this.optionsDana.map((a=>{const e=this.form.dataDana.find((e=>e.idSumberDanaPkpt==a.id));return e&&(a.nilai=e.jumlahDanaPkpt,a.status=!0,this.choosenDana.push(`${a.deskripsi}#${a.id}`)),a})),this.selectedIkk=this.optionsIkk.filter((a=>this.form.kodeIkk.includes(a.kodeIkk))))},methods:{changeCheckedDana(a){a.status=!a.status,0==a.status&&(a.nilai=0)},async getOptionsUnitPkpt(){let a=await this.$store.dispatch("loadSelectUnitPkpt",{idKap:this.idKap});const e=[];a.forEach((a=>{e.push(...a.kontributors)})),this.optionsUnitPkpt=e},async getOptionsRendPelaporan(){let a=await this.$store.dispatch("loadSelectUnitPkpt",{idKap:this.idKap});const e=[];a.forEach((a=>{e.push(...a.kontributors)})),this.optionsRendPelaporan=e.filter((a=>!a.namaUnitKontributor.includes("PW")))},async loadBidwas(a){this.optionsBidwas=await this.$store.dispatch("loadBidwas",{idUnit:a})},async loadListRo(a){this.optionsRo=await this.$store.dispatch("loadListRo",{idUnit:a})},viewSelectSearch({alias:a,deskripsi:e}){return`${a} - ${e}`},viewSelectUnitPkpt({namaUnitKontributor:a,peranPkpt:e}){return`${a} - ${1==e?"Koordinator Topik":"Kontributor Topik"}`},viewSelectIkk({uraianIkk:a,unitKerjaIkk:e}){return`${a} | (${e})`},viewSelectRo({uraianRo:a}){return`${a}`},async deletePkpt(a,e){try{const t=await za()({method:"DELETE",baseURL:this.$apiAddress,url:`/api/pkpt/${e}`,params:{token:localStorage.getItem("token"),nip:localStorage.getItem("nip")}});200==t.status&&(this.toastSuccess("Berhasil menghapus data"),this.pkpts.splice(a))}catch(t){this.toastError(t.message)}},submitToBack(){this.pkpts.length>0?setTimeout((()=>{this.$router.push("/pkpt"),this.toastSuccess("Berhasil membuat PKPT")}),500):this.toastWarning("Selesaikan dahulu pembuatan PKPT")},async submit(){const a=this.$func.isNullOfObjElement(this.form);if(a){this.submitted=!0;const a=this.appendToFormData();try{if("create"==this.mode){this.loading=!0;const e=await za()({method:"POST",baseURL:this.$apiAddress,url:"/api/pkpt",data:a,params:{token:localStorage.getItem("token")}}),t=await e.data;this.optionsDana.filter((a=>a.nilai>0)).forEach((async a=>{await za()({method:"POST",baseURL:this.$apiAddress,url:"/api/danapkpt",data:{idPkpt:t.id_pkpt,idSumberDana:a.id,namaSumberDana:a.deskripsi,nilaiSumberDana:a.nilai},params:{token:localStorage.getItem("token")}})})),200==e.status?(this.loading=!1,this.toastSuccess("Berhasil menyimpan data")):this.error="Gagal menyimpan data",this.pkpts.push(t),this.reset(),this.form.tahun=localStorage.tahun}else if("update"==this.mode){this.loading=!0;const e=await za()({method:"POST",baseURL:this.$apiAddress,url:`/api/pkpt/${this.idPkpt}`,data:a,params:{token:localStorage.getItem("token")}});this.optionsDana.filter((a=>a.nilai>0)).forEach((async a=>{await za()({method:"POST",baseURL:this.$apiAddress,url:"/api/danapkpt",data:{idPkpt:this.idPkpt,idSumberDana:a.id,namaSumberDana:a.deskripsi,nilaiSumberDana:a.nilai},params:{token:localStorage.getItem("token")}})})),200!=e.status?this.error="Gagal merubah data":(this.loading=!1,this.$router.push("/pkpt"),this.toastSuccess("Berhasil merubah data"))}}catch(e){setTimeout((()=>{this.loading=!1,this.toastError("Terjadi kesalahan saat submit data")}),500)}}else this.toastWarning("Lengkapi data sebelum submit!")},reset(){this.form=this.getEmptyForm(),this.submitted=!1,this.selectedUnitPkpt=null,this.infoDiharapkanPkpt=null,this.isReadOnlyKap||(this.pjKap=null,this.selectedKap=null),this.selectedKontributor=null,this.selectedBidwas=null,this.selectedJenisKegiatan=null,this.selectedIkk=null,this.selectedRo=null,this.selectedRmp=null,this.choosenDana=[],this.optionsDana=this.refOptionsDana.map((a=>({...a})))},getEmptyForm(){return{tahun:null,idTopikOrKontributor:null,peranPkpt:null,idUnitKerja:null,namaPkpt:null,idBidwas:null,idRendPelaporan:0,hp:null,jenisKegiatanId:null,jenisKegiatanName:null,kodeIkk:null,kodeRo:null,uraianRo:null,infoBidwas:null,jumlahLokus:null,satuanLokus:null,idSumberDana:52,idRmp:null,namaRmp:null,triwulan:[],namaBidwasPkpt:null,namaUnitKerja:null}},appendToFormData(){const a=new FormData;return"update"==this.mode?a.append("_method","PUT"):(a.append("idKap",this.idKap),a.append("tahunPkpt",this.form.tahun)),a.append("idRendalPelaporan",this.form.idRendPelaporan),a.append("idUnitKerja",this.form.idUnitKerja),a.append("namaUnitKerja",this.form.namaUnitKerja),a.append("namaPkpt",this.form.namaPkpt),a.append("idBidwas",this.form.idBidwas),a.append("namaBidwasPkpt",this.form.namaBidwasPkpt),a.append("triwulan",this.form.triwulan),a.append("hp",this.form.hp),a.append("jenisKegiatanId",this.form.jenisKegiatanId),a.append("jenisKegiatanName",this.form.jenisKegiatanName),a.append("kodeIkk",this.form.kodeIkk.join(",")),a.append("kodeRo",this.form.kodeRo),a.append("uraianRo",this.form.uraianRo),a.append("infoBidwas",this.form.infoBidwas),a.append("jumlahLokus",this.form.jumlahLokus),a.append("satuanLokus",this.form.satuanLokus),a.append("dana",this.totalDana),a.append("idSumberDana",this.form.idSumberDana),a.append("namaSumberDana",this.choosenDana.join(",")),a.append("idRmp",this.form.idRmp),a.append("namaRmp",this.form.namaRmp),a.append("peranPkpt",this.form.peranPkpt),a.append("idTopikOrKontributor",this.form.idTopikOrKontributor),a.append("nip",localStorage.getItem("nip")),a},async loadPkptById(){try{const a=await za()({method:"GET",baseURL:this.$apiAddress,url:`/api/pkpt/${this.idPkpt}`,params:{token:localStorage.getItem("token")}});this.editData=await a.data,200==a.status&&(this.idKap=this.editData.idKap,this.form={tahun:this.editData.tahunPkpt,idTopikOrKontributor:0==this.editData.peranPkpt?this.editData.idKontributor:this.editData.idTopik,peranPkpt:this.editData.peranPkpt,idUnitKerja:this.editData.idUnitKerja,namaPkpt:this.editData.namaPkpt,idBidwas:this.editData.idBidwas,hp:this.editData.hp,jenisKegiatanId:this.editData.jenisKegiatanId,jenisKegiatanName:this.editData.jenisKegiatanName,kodeIkk:this.editData.kodeIkk,kodeRo:this.editData.kodeRo,uraianRo:this.editData.uraianRo,infoBidwas:this.editData.infoBidwas,jumlahLokus:this.editData.jumlahLokus,satuanLokus:this.editData.satuanLokus,dana:this.editData.dana,idSumberDana:this.editData.idSumberDana,idRmp:this.editData.idRmp,triwulan:this.editData.triwulan,idRendPelaporan:this.editData.idRendalPelaporan,dataDana:this.editData.dataDana}),this.loading=!1}catch(a){this.toastError(a.message),this.loading=!1}},toastSuccess(a){this.$toast.open({message:a,type:"success",position:"top-right",duration:3e3})},toastError(a){this.$toast.open({message:a,type:"error",position:"top-right",duration:3e3})},toastWarning(a){this.$toast.open({message:a,type:"warning",position:"top-right",duration:3e3})}}},Ga=t(89);const Qa=(0,Ga.Z)(Za,[["render",Na]]);var Xa=Qa}}]);
//# sourceMappingURL=472.ff75c8ef.js.map