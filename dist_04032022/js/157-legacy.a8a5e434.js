"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[157],{73157:function(e,t,n){n.d(t,{Z:function(){return O}});var o=n(73396),r=n(49242),a={key:0,class:"h4 mb-4"},i={key:1,class:"h4 mb-4"},s=(0,o.Uk)("ID "),l={class:"col-sm-2"},u=(0,o.Uk)("Tahun "),d=(0,o._)("span",{class:"text-red-500"},"*",-1),c={class:"col-sm-2"},m=(0,o.Uk)("Nama Sektor "),p=(0,o._)("span",{class:"text-red-500"},"*",-1),f={class:"col-sm-9"},k=(0,o.Uk)("Nama Tema "),h=(0,o._)("span",{class:"text-red-500"},"*",-1),b={class:"col-sm-9"},w=(0,o.Uk)("Nama Topik "),T=(0,o._)("span",{class:"text-red-500"},"*",-1),g={class:"col-sm-9"},v=(0,o.Uk)("Unit Kerja Kontributor"),S=(0,o._)("span",{class:"text-red-500"},"*",-1),_={class:"col-sm-9"},x=(0,o.Uk)("Informasi Kontributor Yang Diharapkan "),K=(0,o._)("span",{class:"text-red-500"},"*",-1),U={class:"col-sm-9"},W=(0,o._)("p",{class:"text-sm mt-2 text-red-500"}," note : pisahkan informasi kontributor dengan titik koma ';' ",-1),y=(0,o.Uk)("Triwulan Pelaporan Tema "),D=(0,o._)("span",{class:"text-red-500"},"*",-1),V={class:"col-sm-4"},C=(0,o.Uk)(" Batal "),R=(0,o.Uk)(" Reset "),L={key:0},$=(0,o.Uk)(" Simpan "),j={key:1};function I(e,t,n,I,F,P){var E=(0,o.up)("Loading"),Z=(0,o.up)("CFormLabel"),B=(0,o.up)("CFormInput"),q=(0,o.up)("CRow"),A=(0,o.up)("VueMultiselect"),N=(0,o.up)("CFormTextarea"),O=(0,o.up)("CButton"),G=(0,o.up)("CCol"),M=(0,o.up)("CSpinner"),H=(0,o.up)("CForm"),Y=(0,o.up)("CCardBody"),z=(0,o.up)("CCard");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(E,{active:F.loading,"onUpdate:active":t[0]||(t[0]=function(e){return F.loading=e}),"is-full-page":!0},null,8,["active"]),(0,o.Wm)(z,{class:"mb-4"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Y,{class:"p-4"},{default:(0,o.w5)((function(){return["create"==n.mode?((0,o.wg)(),(0,o.iD)("h4",a,"Tambah Kontributor")):"update"==n.mode?((0,o.wg)(),(0,o.iD)("h4",i,"Edit Kontributor")):(0,o.kq)("",!0),"update"==n.mode?((0,o.wg)(),(0,o.j4)(q,{key:2,class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[s]})),_:1}),(0,o._)("div",l,[(0,o.Wm)(B,{modelValue:F.editData.idKontributor,"onUpdate:modelValue":t[1]||(t[1]=function(e){return F.editData.idKontributor=e}),readonly:""},null,8,["modelValue"])])]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)(H,{onSubmit:(0,r.iM)(P.submit,["prevent"])},{default:(0,o.w5)((function(){return[(0,o.Wm)(q,{class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[u,d]})),_:1}),(0,o._)("div",c,[(0,o.Wm)(B,{type:"number",id:"tahun",modelValue:F.form.tahun,"onUpdate:modelValue":t[2]||(t[2]=function(e){return F.form.tahun=e}),readonly:"",required:""},null,8,["modelValue"])])]})),_:1}),(0,o.Wm)(q,{class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"nama-sektor",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[m,p]})),_:1}),(0,o._)("div",f,[(0,o.Wm)(A,{id:"nama-sektor",modelValue:F.selectedSektor,"onUpdate:modelValue":t[3]||(t[3]=function(e){return F.selectedSektor=e}),options:F.optionsSektor,placeholder:"Pilih Sektor",label:"deskripsi","track-by":"deskripsi","custom-label":P.viewSelectSektor},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,o.Wm)(q,{class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"nama-tema",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[k,h]})),_:1}),(0,o._)("div",b,[(0,o.Wm)(A,{id:"nama-tema",modelValue:F.selectedTema,"onUpdate:modelValue":t[4]||(t[4]=function(e){return F.selectedTema=e}),options:F.optionsTema,placeholder:"Pilih Tema",label:"deskripsi","track-by":"deskripsi","custom-label":P.viewSelectTema},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,o.Wm)(q,{class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"nama-topik",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[w,T]})),_:1}),(0,o._)("div",g,[(0,o.Wm)(A,{id:"nama-topik",modelValue:F.selectedTopik,"onUpdate:modelValue":t[5]||(t[5]=function(e){return F.selectedTopik=e}),options:F.optionsTopik,placeholder:"Pilih Topik",label:"deskripsi","track-by":"deskripsi","custom-label":P.viewSelectTopik},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,o.Wm)(q,{class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"unit-kontributor",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[v,S]})),_:1}),(0,o._)("div",_,[(0,o.Wm)(A,{id:"unit-kontributor",modelValue:F.selectedKontributor,"onUpdate:modelValue":t[6]||(t[6]=function(e){return F.selectedKontributor=e}),options:F.optionsKontributor,placeholder:"Pilih Unit Kerja Kontributor",label:"deskripsi","track-by":"deskripsi","custom-label":P.viewSelectSearch},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,o.Wm)(q,{class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"info-kontributor",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[x,K]})),_:1}),(0,o._)("div",U,[(0,o.Wm)(N,{id:"info-kontributor",rows:"3",modelValue:F.form.deskripsi,"onUpdate:modelValue":t[7]||(t[7]=function(e){return F.form.deskripsi=e}),required:"",placeholder:"Info A; Info B; Info C;"},null,8,["modelValue"]),W])]})),_:1}),(0,o.Wm)(q,{class:"mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(Z,{for:"tw-tema",class:"col-sm-3 col-form-label"},{default:(0,o.w5)((function(){return[y,D]})),_:1}),(0,o._)("div",V,[(0,o.Wm)(A,{id:"tw-sektor",modelValue:F.form.triwulan,"onUpdate:modelValue":t[8]||(t[8]=function(e){return F.form.triwulan=e}),options:F.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])]})),_:1}),(0,o.Wm)(q,{class:"mt-8 view-form"},{default:(0,o.w5)((function(){return[(0,o.Wm)(G,{sm:"12",lg:"6",class:"mb-3"},{default:(0,o.w5)((function(){return["view"!=n.mode?((0,o.wg)(),(0,o.j4)(O,{key:0,variant:"outline",color:"dark",onClick:t[9]||(t[9]=function(t){return e.$router.push("/kontributor")}),class:"px-5"},{default:(0,o.w5)((function(){return[C]})),_:1})):(0,o.kq)("",!0)]})),_:1}),"create"==n.mode||"update"==n.mode?((0,o.wg)(),(0,o.j4)(G,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(O,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:P.reset},{default:(0,o.w5)((function(){return[R]})),_:1},8,["onClick"]),(0,o.Wm)(O,{type:"submit",color:"info",class:"px-5 ml-2 text-white"},{default:(0,o.w5)((function(){return[F.loading?((0,o.wg)(),(0,o.iD)("div",L,[(0,o.Wm)(M,{color:"white",size:"sm",class:"mr-2"}),$])):((0,o.wg)(),(0,o.iD)("p",j,"Simpan"))]})),_:1})]})),_:1})):(0,o.kq)("",!0)]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1})],64)}var F=n(48534),P=(n(36133),n(57327),n(41539),n(92222),n(56265)),E=n.n(P),Z=n(16368),B=n(6216),q={components:{VueMultiselect:Z.ZP,Loading:B.Z},props:["mode","idKontributor"],data:function(){return{form:this.getEmptyForm(),submitted:!1,loading:!1,selectedSektor:null,optionsSektor:[],selectedTema:null,optionsTema:[],selectedTopik:null,optionsTopik:[],selectedKontributor:null,optionsKontributor:[],optionsTriwulan:[1,2,3,4],editData:{},valDeputi:null,valRendal:null}},watch:{selectedSektor:function(e){e&&(this.form.idSektor=e.idSektor,this.selectedTema="",this.getListTema(),this.selectedTopik="",this.getListTopik())},selectedTema:function(e){e&&(this.form.idTema=e.idTema,this.selectedTopik="",this.getListTopik())},selectedTopik:function(e){e&&(this.form.idTopik=e.idTopik,this.form.valDeputi=e.idKedeputian,this.form.valRendal=e.idUnitKerja)},selectedKontributor:function(e){e&&(this.form.idUnitKontributor=e.id)}},mounted:function(){var e=this;return(0,F.Z)(regeneratorRuntime.mark((function t(){var n,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.tahun=localStorage.tahun,t.next=3,e.$store.dispatch("loadListSektor");case 3:return e.optionsSektor=t.sent,t.next=6,e.$store.dispatch("loadListUnitKontributor");case 6:if(e.optionsKontributor=t.sent,"update"!=e.mode){t.next=23;break}return e.loading=!0,t.next=11,e.loadKontributorById();case 11:return n=e.optionsSektor.filter((function(t){return t.idSektor==e.form.idSektor})),e.selectedSektor=n[0],t.next=15,e.getListTema();case 15:return o=e.optionsTema.filter((function(t){return t.idTema==e.form.idTema})),e.selectedTema=o[0],t.next=19,e.getListTopik();case 19:r=e.optionsTopik.filter((function(t){return t.idTopik==e.form.idTopik})),e.selectedTopik=r[0],a=e.optionsKontributor.filter((function(t){return t.id==e.form.idUnitKontributor})),e.selectedKontributor=a[0];case 23:case"end":return t.stop()}}),t)})))()},methods:{getListTema:function(){var e=this;return(0,F.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadListTema",{idSektor:e.form.idSektor});case 2:e.optionsTema=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getListTopik:function(){var e=this;return(0,F.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadListTopik",{idSektor:e.form.idSektor,idTema:e.form.idTema});case 2:e.optionsTopik=t.sent;case 3:case"end":return t.stop()}}),t)})))()},viewSelectSektor:function(e){var t=e.namaSektor;return"".concat(t)},viewSelectTema:function(e){var t=e.namaTema;return"".concat(t)},viewSelectTopik:function(e){var t=e.namaTopik;return"".concat(t)},viewSelectSearch:function(e){var t=e.alias,n=e.deskripsi;return"".concat(t," - ").concat(n)},submit:function(){var e=this;return(0,F.Z)(regeneratorRuntime.mark((function t(){var n,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$func.isNullOfObjElement(e.form),!n){t.next=26;break}if(e.submitted=!0,o=e.appendToFormData(),t.prev=4,"create"!=e.mode){t.next=13;break}return e.loading=!0,t.next=9,E()({method:"POST",baseURL:e.$apiAddress,url:"/api/kontributor",data:o,params:{token:localStorage.getItem("token")}});case 9:r=t.sent,200!=r.status?e.error="Gagal menyimpan data":(e.loading=!1,e.$router.push("/kontributor"),e.toastSuccess("Berhasil menyimpan data")),t.next=19;break;case 13:if("update"!=e.mode){t.next=19;break}return e.loading=!0,t.next=17,E()({method:"POST",baseURL:e.$apiAddress,url:"/api/kontributor/".concat(e.idKontributor),data:o,params:{token:localStorage.getItem("token")}});case 17:a=t.sent,200!=a.status?e.error="Gagal merubah data":(e.loading=!1,e.$router.push("/kontributor"),e.toastSuccess("Berhasil merubah data"));case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](4),setTimeout((function(){e.loading=!1,e.toastError("Terjadi kesalahan saat submit data")}),500);case 24:t.next=27;break;case 26:e.toastWarning("Lengkapi data sebelum submit!");case 27:case"end":return t.stop()}}),t,null,[[4,21]])})))()},reset:function(){this.form=this.getEmptyForm(),this.submitted=!1,this.selectedSektor=null,this.selectedTema=null,this.selectedTopik=null,this.valDeputi=null,this.valRendal=null,this.selectedKontributor=null},getEmptyForm:function(){return{tahun:null,idSektor:null,idTema:null,idTopik:null,valDeputi:null,valRendal:null,idUnitKontributor:null,deskripsi:null,triwulan:null}},appendToFormData:function(){var e=new FormData;return"update"==this.mode&&e.append("_method","PATCH"),e.append("idSektor",this.form.idSektor),e.append("idTema",this.form.idTema),e.append("idTopik",this.form.idTopik),e.append("idKedeputian",this.form.valDeputi),e.append("idUnitKerja",this.form.valRendal),e.append("idUnitKontributor",this.form.idUnitKontributor),e.append("deskripsi",this.form.deskripsi),e.append("tahun",this.form.tahun),e.append("triwulan",this.form.triwulan),e.append("nip",localStorage.getItem("nip")),e},loadKontributorById:function(){var e=this;return(0,F.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E()({method:"GET",baseURL:e.$apiAddress,url:"/api/kontributor/".concat(e.idKontributor),params:{token:localStorage.getItem("token")}});case 3:return n=t.sent,t.next=6,n.data;case 6:e.editData=t.sent,200==n.status&&(e.form={tahun:e.editData.tahun,idSektor:e.editData.idSektor,idTema:e.editData.idTema,idTopik:e.editData.idTopik,idKedeputian:e.editData.idKedeputian,idUnitKerja:e.editData.idUnitKerja,idUnitKontributor:e.editData.idUnitKontributor,deskripsi:e.editData.deskripsi,triwulan:e.editData.triwulan}),e.loading=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.toastError(t.t0.message),e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},toastSuccess:function(e){this.$toast.open({message:e,type:"success",position:"top-right",duration:3e3})},toastError:function(e){this.$toast.open({message:e,type:"error",position:"top-right",duration:3e3})},toastWarning:function(e){this.$toast.open({message:e,type:"warning",position:"top-right",duration:3e3})}}},A=n(40089);const N=(0,A.Z)(q,[["render",I]]);var O=N}}]);
//# sourceMappingURL=157-legacy.a8a5e434.js.map