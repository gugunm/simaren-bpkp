"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[160],{3160:function(e,t,a){a.d(t,{Z:function(){return H}});var n=a(73396),o=a(49242),r={key:0,class:"h4 mb-4"},i={key:1,class:"h4 mb-4"},l=(0,n.Uk)("ID "),s={class:"col-sm-2"},u=(0,n.Uk)("Tahun "),d=(0,n._)("span",{class:"text-red-500"},"*",-1),c={class:"col-sm-2"},m=(0,n.Uk)("Nama Sektor "),p=(0,n._)("span",{class:"text-red-500"},"*",-1),f={class:"col-sm-9"},k=(0,n.Uk)("Nama Tema "),h=(0,n._)("span",{class:"text-red-500"},"*",-1),w={class:"col-sm-9"},b=(0,n.Uk)("Nama Topik "),g=(0,n._)("span",{class:"text-red-500"},"*",-1),T={class:"col-sm-9"},_=(0,n.Uk)("Informasi Topik Yang Diharapkan "),v=(0,n._)("span",{class:"text-red-500"},"*",-1),S={class:"col-sm-9"},x=(0,n._)("p",{class:"text-sm mt-2 text-red-500"}," note : pisahkan informasi topik dengan titik koma ';' ",-1),W=(0,n.Uk)("Kedeputian Koord Topik "),U=(0,n._)("span",{class:"text-red-500"},"*",-1),y={class:"col-sm-9"},D=(0,n.Uk)("Unit Kerja PJ Topik "),V=(0,n._)("span",{class:"text-red-500"},"*",-1),R={class:"col-sm-9"},C=(0,n.Uk)("Triwulan Pelaporan Topik "),j=(0,n._)("span",{class:"text-red-500"},"*",-1),K={class:"col-sm-4"},I=(0,n.Uk)(" Batal "),L=(0,n.Uk)(" Reset "),$={key:0},P=(0,n.Uk)(" Simpan "),F={key:1};function E(e,t,a,E,B,Z){var q=(0,n.up)("Loading"),A=(0,n.up)("CFormLabel"),N=(0,n.up)("CFormInput"),O=(0,n.up)("CRow"),G=(0,n.up)("VueMultiselect"),M=(0,n.up)("CFormTextarea"),H=(0,n.up)("CButton"),Y=(0,n.up)("CCol"),z=(0,n.up)("CSpinner"),J=(0,n.up)("CForm"),Q=(0,n.up)("CCardBody"),X=(0,n.up)("CCard");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(q,{active:B.loading,"onUpdate:active":t[0]||(t[0]=function(e){return B.loading=e}),"is-full-page":!0},null,8,["active"]),(0,n.Wm)(X,{class:"mb-4"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Q,{class:"p-4"},{default:(0,n.w5)((function(){return["create"==a.mode?((0,n.wg)(),(0,n.iD)("h4",r,"Tambah Topik")):"update"==a.mode?((0,n.wg)(),(0,n.iD)("h4",i,"Edit Topik")):(0,n.kq)("",!0),"update"==a.mode?((0,n.wg)(),(0,n.j4)(O,{key:2,class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[l]})),_:1}),(0,n._)("div",s,[(0,n.Wm)(N,{modelValue:B.editData.idTopik,"onUpdate:modelValue":t[1]||(t[1]=function(e){return B.editData.idTopik=e}),readonly:""},null,8,["modelValue"])])]})),_:1})):(0,n.kq)("",!0),(0,n.Wm)(J,{onSubmit:(0,o.iM)(Z.submit,["prevent"])},{default:(0,n.w5)((function(){return[(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"tahun",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[u,d]})),_:1}),(0,n._)("div",c,[(0,n.Wm)(N,{type:"number",id:"tahun",modelValue:B.form.tahun,"onUpdate:modelValue":t[2]||(t[2]=function(e){return B.form.tahun=e}),readonly:"",required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"nama-sektor",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[m,p]})),_:1}),(0,n._)("div",f,[(0,n.Wm)(G,{id:"nama-sektor",modelValue:B.selectedSektor,"onUpdate:modelValue":t[3]||(t[3]=function(e){return B.selectedSektor=e}),options:B.optionsSektor,placeholder:"Pilih Sektor",label:"deskripsi","track-by":"deskripsi","custom-label":Z.viewSelectSektor},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"nama-tema",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[k,h]})),_:1}),(0,n._)("div",w,[(0,n.Wm)(G,{id:"nama-tema",modelValue:B.selectedTema,"onUpdate:modelValue":t[4]||(t[4]=function(e){return B.selectedTema=e}),options:B.optionsTema,placeholder:"Pilih Tema",label:"deskripsi","track-by":"deskripsi","custom-label":Z.viewSelectTema},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"nama-topik",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[b,g]})),_:1}),(0,n._)("div",T,[(0,n.Wm)(N,{type:"text",id:"nama-topik",modelValue:B.form.namaTopik,"onUpdate:modelValue":t[5]||(t[5]=function(e){return B.form.namaTopik=e}),required:""},null,8,["modelValue"])])]})),_:1}),(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"info-topik",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[_,v]})),_:1}),(0,n._)("div",S,[(0,n.Wm)(M,{id:"info-topik",rows:"3",modelValue:B.form.deskripsi,"onUpdate:modelValue":t[6]||(t[6]=function(e){return B.form.deskripsi=e}),required:"",placeholder:"Info A; Info B; Info C;"},null,8,["modelValue"]),x])]})),_:1}),(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"deputi-topik",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[W,U]})),_:1}),(0,n._)("div",y,[(0,n.Wm)(N,{type:"text",id:"dep-topik",value:B.viewDeputi,readonly:""},null,8,["value"])])]})),_:1}),(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"pj-topik",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[D,V]})),_:1}),(0,n._)("div",R,[(0,n.Wm)(G,{id:"pj-topik",modelValue:B.selectedRendal,"onUpdate:modelValue":t[7]||(t[7]=function(e){return B.selectedRendal=e}),options:B.optionsRendal,placeholder:"Pilih Unit Kerja Penanggungjawab",label:"deskripsi","track-by":"deskripsi","custom-label":Z.viewSelectSearch},null,8,["modelValue","options","custom-label"])])]})),_:1}),(0,n.Wm)(O,{class:"mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{for:"tw-topik",class:"col-sm-3 col-form-label"},{default:(0,n.w5)((function(){return[C,j]})),_:1}),(0,n._)("div",K,[(0,n.Wm)(G,{id:"tw-topik",modelValue:B.form.triwulan,"onUpdate:modelValue":t[8]||(t[8]=function(e){return B.form.triwulan=e}),options:B.optionsTriwulan,multiple:!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pilih Triwulan"},null,8,["modelValue","options"])])]})),_:1}),(0,n.Wm)(O,{class:"mt-8 view-form"},{default:(0,n.w5)((function(){return[(0,n.Wm)(Y,{sm:"12",lg:"6",class:"mb-3"},{default:(0,n.w5)((function(){return["view"!=a.mode?((0,n.wg)(),(0,n.j4)(H,{key:0,variant:"outline",color:"dark",onClick:t[9]||(t[9]=function(t){return e.$router.push("/topik")}),class:"px-5"},{default:(0,n.w5)((function(){return[I]})),_:1})):(0,n.kq)("",!0)]})),_:1}),"create"==a.mode||"update"==a.mode?((0,n.wg)(),(0,n.j4)(Y,{key:0,sm:"12",md:"6",class:"flex content-center justify-end pr-3 mb-3"},{default:(0,n.w5)((function(){return[(0,n.Wm)(H,{type:"button",class:"ml-1 px-5 text-white",color:"danger",onClick:Z.reset},{default:(0,n.w5)((function(){return[L]})),_:1},8,["onClick"]),(0,n.Wm)(H,{type:"submit",color:"info",class:"px-5 ml-2 text-white"},{default:(0,n.w5)((function(){return[B.loading?((0,n.wg)(),(0,n.iD)("div",$,[(0,n.Wm)(z,{color:"white",size:"sm",class:"mr-2"}),P])):((0,n.wg)(),(0,n.iD)("p",F,"Simpan"))]})),_:1})]})),_:1})):(0,n.kq)("",!0)]})),_:1})]})),_:1},8,["onSubmit"])]})),_:1})]})),_:1})],64)}var B=a(48534),Z=(a(36133),a(92222),a(57327),a(41539),a(56265)),q=a.n(Z),A=a(16368),N=a(6216),O={components:{VueMultiselect:A.ZP,Loading:N.Z},props:["mode","idTopik"],data:function(){return{form:this.getEmptyForm(),submitted:!1,loading:!1,selectedSektor:null,optionsSektor:[],selectedTema:null,optionsTema:[],viewDeputi:null,selectedRendal:null,optionsRendal:[],optionsTriwulan:[1,2,3,4],editData:{}}},watch:{selectedSektor:function(e){e&&(this.form.idSektor=e.idSektor,this.selectedTema="",this.getListTema())},selectedTema:function(e){e&&(this.form.idTema=e.idTema)},selectedRendal:function(e){e&&(this.form.idUnitKerja=e.id,this.form.idKedeputian=e.parentId,this.viewDeputi="".concat(e.deputi," - ").concat(e.namaDeputi))}},mounted:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.tahun=localStorage.tahun,t.next=3,e.$store.dispatch("loadListSektor");case 3:return e.optionsSektor=t.sent,t.next=6,e.$store.dispatch("loadListUnitKontributor");case 6:if(e.optionsRendal=t.sent,"update"!=e.mode){t.next=19;break}return e.loading=!0,t.next=11,e.loadTopikById();case 11:return a=e.optionsSektor.filter((function(t){return t.idSektor==e.form.idSektor})),e.selectedSektor=a[0],t.next=15,e.getListTema();case 15:n=e.optionsTema.filter((function(t){return t.idTema==e.form.idTema})),e.selectedTema=n[0],o=e.optionsRendal.filter((function(t){return t.id==e.form.idUnitKerja})),e.selectedRendal=o[0];case 19:case"end":return t.stop()}}),t)})))()},methods:{getListTema:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadListTema",{idSektor:e.form.idSektor});case 2:e.optionsTema=t.sent;case 3:case"end":return t.stop()}}),t)})))()},viewSelectSektor:function(e){var t=e.namaSektor;return"".concat(t)},viewSelectTema:function(e){var t=e.namaTema;return"".concat(t)},viewSelectSearch:function(e){var t=e.alias,a=e.deskripsi;return"".concat(t," - ").concat(a)},submit:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var a,n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$func.isNullOfObjElement(e.form),!a){t.next=26;break}if(e.submitted=!0,n=e.appendToFormData(),t.prev=4,"create"!=e.mode){t.next=13;break}return e.loading=!0,t.next=9,q()({method:"POST",baseURL:e.$apiAddress,url:"/api/topik",data:n,params:{token:localStorage.getItem("token")}});case 9:o=t.sent,200!=o.status?e.error="Gagal menyimpan data":(e.loading=!1,e.$router.push("/topik"),e.toastSuccess("Berhasil menyimpan data")),t.next=19;break;case 13:if("update"!=e.mode){t.next=19;break}return e.loading=!0,t.next=17,q()({method:"POST",baseURL:e.$apiAddress,url:"/api/topik/".concat(e.idTopik),data:n,params:{token:localStorage.getItem("token")}});case 17:r=t.sent,200!=r.status?e.error="Gagal merubah data":(e.loading=!1,e.$router.push("/topik"),e.toastSuccess("Berhasil merubah data"));case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](4),setTimeout((function(){e.loading=!1,e.toastError("Terjadi kesalahan saat submit data")}),500);case 24:t.next=27;break;case 26:e.toastWarning("Lengkapi data sebelum submit!");case 27:case"end":return t.stop()}}),t,null,[[4,21]])})))()},reset:function(){this.form=this.getEmptyForm(),this.submitted=!1,this.selectedSektor=null,this.selectedTema=null,this.viewDeputi=null,this.selectedRendal=null},getEmptyForm:function(){return{tahun:null,idSektor:null,idTema:null,namaTopik:null,deskripsi:null,idKedeputian:null,idUnitKerja:null,triwulan:null}},appendToFormData:function(){var e=new FormData;return"update"==this.mode&&e.append("_method","PATCH"),e.append("idSektor",this.form.idSektor),e.append("idTema",this.form.idTema),e.append("namaTopik",this.form.namaTopik),e.append("deskripsi",this.form.deskripsi),e.append("idKedeputian",this.form.idKedeputian),e.append("idUnitKerja",this.form.idUnitKerja),e.append("tahun",this.form.tahun),e.append("triwulan",this.form.triwulan),e.append("nip",localStorage.getItem("nip")),e},loadTopikById:function(){var e=this;return(0,B.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q()({method:"GET",baseURL:e.$apiAddress,url:"/api/topik/".concat(e.idTopik),params:{token:localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.data;case 6:e.editData=t.sent,200==a.status&&(e.form={tahun:e.editData.tahun,idSektor:e.editData.idSektor,idTema:e.editData.idTema,namaTopik:e.editData.namaTopik,deskripsi:e.editData.deskripsi,idKedeputian:e.editData.idKedeputian,idUnitKerja:e.editData.idUnitKerja,triwulan:e.editData.triwulan}),e.loading=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.toastError(t.t0.message),e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},toastSuccess:function(e){this.$toast.open({message:e,type:"success",position:"top-right",duration:3e3})},toastError:function(e){this.$toast.open({message:e,type:"error",position:"top-right",duration:3e3})},toastWarning:function(e){this.$toast.open({message:e,type:"warning",position:"top-right",duration:3e3})}}},G=a(40089);const M=(0,G.Z)(O,[["render",E]]);var H=M}}]);
//# sourceMappingURL=160-legacy.782eea67.js.map